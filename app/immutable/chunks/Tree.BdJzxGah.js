import{a as i,b as w,c as Y}from"./disclose-version.6vPDxpwZ.js";import{V as ue,c as Z,N as fe,$ as E,W as de,a as e,a0 as q,a1 as be,d as te,Y as D,X as f,Z as v,b as d,a2 as me,a3 as ke}from"./runtime.DmHE6BeA.js";import{s as z}from"./render.Dk-K2w9T.js";import{p as _,i as B}from"./if.iF3oE4Wo.js";import{e as he,i as ye}from"./each.C5CniBgF.js";import{s as C}from"./attributes.C-22cz5S.js";import{t as G}from"./class.Bvena8yX.js";import{d as xe}from"./events.DiWhd9B4.js";import{b as ge}from"./this._SSdfQ9w.js";import{p as F,o as we}from"./index-client.BkplqDcG.js";var pe=(b,t,a,n)=>{d(t,_(e(a))),n(e(a))},Ae=w('<li><button class="svelte-1x61k52"> </button></li>'),Ee=(b,t,a,n)=>{d(t,_(e(a))),n(e(a))},De=w('<button class="svelte-1x61k52"> </button> <!>',1),Le=(b,t,a,n)=>{d(t,_(e(a))),n(e(a))},Te=w('<button class="svelte-1x61k52"> </button>'),qe=w("<li><!></li>"),Be=w('<ol class="svelte-1x61k52"></ol>'),Ce=(b,t,a,n,m,p)=>{t.tree[e(a)].type==="folder"?(e(n).push(e(a)),m()(e(a))):m()(e(p))},Fe=(b,t,a,n,m,p)=>{t.tree[e(a)].type==="folder"?(e(n).push(e(a)),m()(e(a))):m()(e(p))},Ie=(b,t,a,n)=>{t()(e(a),e(n))},Ke=w('<div class="tree svelte-1x61k52"><div class="controls svelte-1x61k52"><p class="title svelte-1x61k52">My Project</p> <button>+📂</button> <button>+📜</button> <button class="delete-button svelte-1x61k52">-🗑️</button></div> <div class="directory svelte-1x61k52"><!></div></div>');function Ze(b,t){ue(t,!0);const a=(o,h=be,R)=>{let Q=me(()=>ke(R==null?void 0:R(),0));var $=Y(),le=q($);B(le,()=>h().type==="folder",ne=>{var T=Be();he(T,21,()=>h().children,ye,(se,l)=>{var ee=Y(),ce=q(ee);B(ce,()=>t.tree[e(l)].type==="page",S=>{var g=Ae(),y=f(g);y.__click=[pe,r,l,x];var V=f(y);v(y),v(g),E(()=>{C(y,"id",e(l)),G(y,"selected",e(r)===e(l)),z(V,`📜 ${t.tree[e(l)].name??""}`)}),i(S,g)},S=>{var g=Y(),y=q(g);B(y,()=>t.tree[e(l)].type==="folder",V=>{var W=qe(),ie=f(W);B(ie,()=>e(s).includes(e(l)),X=>{var c=De(),u=q(c);u.__click=[Ee,r,l,x];var ve=f(u);v(u);var _e=D(u,2);a(_e,()=>t.tree[e(l)],()=>e(Q)+1),E(()=>{C(u,"id",e(l)),G(u,"selected",e(r)===e(l)),z(ve,`📂 ${t.tree[e(l)].name??""}`)}),i(X,c)},X=>{var c=Te();c.__click=[Le,r,l,x];var u=f(c);v(c),E(()=>{C(c,"id",e(l)),G(c,"selected",e(r)===e(l)),z(u,`📁 ${t.tree[e(l)].name??""}`)}),i(X,c)}),v(W),i(V,W)},null,!0),i(S,g)}),i(se,ee)}),v(T),E(()=>C(T,"style",`--depth: ${e(Q)??""}`)),i(ne,T)}),i(o,$)};let n=F(t,"newFolder",3,()=>{}),m=F(t,"newPage",3,()=>{}),p=F(t,"removeChild",3,()=>{}),re=F(t,"active",3,!0),s=Z(_(["root"])),r=Z("root"),I=te(()=>{for(const o in t.tree)if(t.tree[o].type==="folder"&&t.tree[o].children.includes(e(r)))return o;return"root"});function x(o){t.tree[o].type==="folder"&&(e(s).includes(o)?d(s,_(e(s).filter(h=>h!==o))):e(s).push(o))}let L,k=Z(_([])),A=te(()=>e(k).findIndex(o=>o.id===e(r)));fe(()=>{e(s).length>0&&t.tree&&d(k,_(Array.from(L.querySelectorAll("button"))))});function K(){e(A)>0&&d(r,_(e(k)[e(A)-1].id))}function M(){e(A)<e(k).length-1&&d(r,_(e(k)[e(A)+1].id))}function ae(){d(r,"root"),e(k).forEach(o=>o.blur()),L.focus()}function H(o){var h;if(re()){switch(o.key){case"ArrowLeft":e(s).includes(e(r))?x(e(r)):K();break;case"ArrowRight":t.tree[e(r)].type==="folder"&&e(r)!=="root"&&!e(s).includes(e(r))?x(e(r)):M();break;case"ArrowUp":K();break;case"ArrowDown":M();break;case"Enter":x(e(r));break;case"Escape":ae();break;case"Tab":o.preventDefault(),o.shiftKey?K():M();break}(h=e(k)[e(A)])==null||h.focus()}}we(()=>(document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}));var P=Ke(),U=f(P),J=D(f(U),2);J.__click=[Ce,t,r,s,n,I];var N=D(J,2);N.__click=[Fe,t,r,s,m,I];var O=D(N,2);O.__click=[Ie,p,I,r],v(U);var j=D(U,2);ge(j,o=>L=o,()=>L);var oe=f(j);a(oe,()=>t.tree.root),v(j),v(P),E(()=>O.disabled=!e(r)||e(r)==="root"),i(b,P),de()}xe(["click"]);export{Ze as T};
