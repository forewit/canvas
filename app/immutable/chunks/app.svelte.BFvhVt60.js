import{p as n}from"./proxy.Csehax7D.js";import{s as x,g as d,b as r,c as a,a as o,d as D}from"./runtime.BZ2yvmcy.js";import{g as w}from"./firebase.svelte.-uLT7CDo.js";function v(t,s){t.style.setProperty("--bg",s.bg),t.style.setProperty("--bg-alt",s.bgAlt),t.style.setProperty("--main",s.main),t.style.setProperty("--error",s.error),t.style.setProperty("--text",s.text),t.style.setProperty("--sub",s.sub)}const I=()=>g.map(t=>t.name),g=[{name:"Canvas",bg:"#f0f0f0",bgAlt:"#ffffff",main:"#c2c3cc",error:"#f24726",sub:"#808080",text:"#858585"}];function A(){const t=w();let s=0,c=o(""),m=o(""),p=o("Canvas"),P=D(()=>g.find(e=>e.name===r(p))||g[0]),u=o(!0),f=o(1),h=o(!1),b=o("");function i(){t.publishDoc([],{lastUpdated:s,theme:r(p),spellcheck:r(u),username:r(c)})}function k(e){Object.hasOwn(e,"username")&&typeof e.username=="string"&&a(c,n(e.username)),Object.hasOwn(e,"theme")&&typeof e.theme=="string"&&a(p,n(e.theme)),Object.hasOwn(e,"spellcheck")&&typeof e.spellcheck=="boolean"&&a(u,n(e.spellcheck))}return t.subscribeToDoc([],(e,l)=>{t.isLoading||l===null||(l.lastUpdated===void 0||l.lastUpdated<s?i():l.lastUpdated>s?k(l):l.lastUpdated===s&&console.log("app in sync with user doc"))}),{get authRedirect(){return r(m)},set authRedirect(e){a(m,n(e))},get zoom(){return r(f)},set zoom(e){a(f,n(e))},get lockPage(){return r(h)},set lockPage(e){a(h,n(e))},get currentPageID(){return r(b)},set currentPageID(e){a(b,n(e))},get theme(){return r(P)},get username(){return r(c)},set username(e){a(c,n(e)),s=Date.now(),i()},get themeName(){return r(p)},set themeName(e){a(p,n(e)),s=Date.now(),i()},get spellcheck(){return r(u)},set spellcheck(e){a(u,n(e)),s=Date.now(),i()}}}const y=Symbol("app"),N=()=>{const t=A();return x(y,t)},j=()=>d(y);export{v as a,I as b,j as g,N as s,g as t};
