import{p as t}from"./if.V5ZpdPWX.js";import{i as b,j as F,k as s,l as o,m as i}from"./runtime.CAgxYfLh.js";import{g as d}from"./firebase.svelte.DJT-FR9v.js";function O(){const h=d();let r=0,p=i(""),m=i(""),c=i("Canvas"),w=i(!0),u=i(!0),a=i(!0);function n(){h.publishDoc([],{lastUpdated:r,theme:s(c),spellcheck:s(w),username:s(p),showFolderName:s(a),showFolderPreview:s(u)})}function g(e){Object.hasOwn(e,"username")&&typeof e.username=="string"&&o(p,t(e.username)),Object.hasOwn(e,"theme")&&typeof e.theme=="string"&&o(c,t(e.theme)),Object.hasOwn(e,"spellcheck")&&typeof e.spellcheck=="boolean"&&o(w,t(e.spellcheck)),Object.hasOwn(e,"showFolderPreview")&&typeof e.showFolderPreview=="boolean"&&o(u,t(e.showFolderPreview)),Object.hasOwn(e,"showFolderName")&&typeof e.showFolderName=="boolean"&&o(a,t(e.showFolderName))}return h.subscribeToDoc([],(e,l)=>{h.isLoading||l===null||(l.lastUpdated===void 0||l.lastUpdated<r?n():l.lastUpdated>r?g(l):l.lastUpdated===r&&console.log("app in sync with user doc"))}),{get authRedirect(){return s(m)},set authRedirect(e){o(m,t(e))},get username(){return s(p)},set username(e){o(p,t(e)),r=Date.now(),n()},get theme(){return s(c)},set theme(e){o(c,t(e)),r=Date.now(),n()},get spellcheck(){return s(w)},set spellcheck(e){o(w,t(e)),r=Date.now(),n()},get showFolderPreview(){return s(u)},set showFolderPreview(e){o(u,t(e)),r=Date.now(),n()},get showFolderName(){return s(a)},set showFolderName(e){o(a,t(e)),r=Date.now(),n()}}}const f=Symbol("app"),y=()=>{const h=O();return b(f,h)},x=()=>F(f);export{x as g,y as s};
