import{p}from"./proxy.pcUAtjrM.js";import{s as f,g,d as a,e as l,b as i}from"./runtime.DmOoDO8L.js";import{g as b}from"./firebase.svelte.D2298B1x.js";function d(){const n=b();let t=0,h=i(""),o=i("Canvas"),r=i(!0);function c(){n.publishDoc([],{lastUpdated:t,themeName:a(o),spellcheck:a(r)})}function u(e){Object.hasOwn(e,"themeName")&&typeof e.themeName=="string"&&l(o,p(e.themeName)),Object.hasOwn(e,"spellcheck")&&typeof e.spellcheck=="boolean"&&l(r,p(e.spellcheck))}return n.subscribeToDoc([],(e,s)=>{n.isLoading||s===null||(s.lastUpdated===void 0||s.lastUpdated<t?c():s.lastUpdated>t?u(s):s.lastUpdated===t&&console.log("app in sync with user doc"))}),{get authRedirect(){return a(h)},set authRedirect(e){l(h,p(e))},get themeName(){return a(o)},set themeName(e){l(o,p(e)),t=Date.now(),c()},get spellcheck(){return a(r)},set spellcheck(e){l(r,p(e)),t=Date.now(),c()}}}const m=Symbol("app"),C=()=>{const n=d();return f(m,n)},w=()=>g(m);export{w as g,C as s};
