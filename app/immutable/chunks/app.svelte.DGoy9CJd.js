import{p as s}from"./proxy.DN1QV3dX.js";import{s as g,g as b,b as n,c as r,a as u}from"./runtime.Cnk7LXRW.js";import{g as k}from"./firebase.svelte.D1U9I8Ju.js";function w(){const o=k();let t=0,l=u(""),h=u(""),c=u("Canvas"),i=u(!0);function a(){o.publishDoc([],{lastUpdated:t,theme:n(c),spellcheck:n(i),username:n(l)})}function f(e){Object.hasOwn(e,"username")&&typeof e.username=="string"&&r(l,s(e.username)),Object.hasOwn(e,"theme")&&typeof e.theme=="string"&&r(c,s(e.theme)),Object.hasOwn(e,"spellcheck")&&typeof e.spellcheck=="boolean"&&r(i,s(e.spellcheck))}return o.subscribeToDoc([],(e,p)=>{o.isLoading||p===null||(p.lastUpdated===void 0||p.lastUpdated<t?a():p.lastUpdated>t?f(p):p.lastUpdated===t&&console.log("app in sync with user doc"))}),{get authRedirect(){return n(h)},set authRedirect(e){r(h,s(e))},get username(){return n(l)},set username(e){r(l,s(e)),t=Date.now(),a()},get theme(){return n(c)},set theme(e){r(c,s(e)),t=Date.now(),a()},get spellcheck(){return n(i)},set spellcheck(e){r(i,s(e)),t=Date.now(),a()}}}const m=Symbol("app"),O=()=>{const o=w();return g(m,o)},A=()=>b(m);export{A as g,O as s};
