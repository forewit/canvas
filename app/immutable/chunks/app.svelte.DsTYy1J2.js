import{p as s}from"./if.iF3oE4Wo.js";import{s as F,g as v,a as t,b as r,c as h,d as N}from"./runtime.DmHE6BeA.js";import{g as O,t as f}from"./themes.svelte.e9knPHAw.js";function P(){const i=O();let o=0,a=h(""),w=h(""),p=h("Canvas"),b=N(()=>f.find(e=>e.name===t(p))||f[0]),m=h(!0),c=h(!0),u=h(!0);function n(){i.publishDoc([],{lastUpdated:o,theme:t(p),spellcheck:t(m),username:t(a),showFolderName:t(u),showFolderPreview:t(c)})}function d(e){Object.hasOwn(e,"username")&&typeof e.username=="string"&&r(a,s(e.username)),Object.hasOwn(e,"theme")&&typeof e.theme=="string"&&r(p,s(e.theme)),Object.hasOwn(e,"spellcheck")&&typeof e.spellcheck=="boolean"&&r(m,s(e.spellcheck)),Object.hasOwn(e,"showFolderPreview")&&typeof e.showFolderPreview=="boolean"&&r(c,s(e.showFolderPreview)),Object.hasOwn(e,"showFolderName")&&typeof e.showFolderName=="boolean"&&r(u,s(e.showFolderName))}return i.subscribeToDoc([],(e,l)=>{i.isLoading||l===null||(l.lastUpdated===void 0||l.lastUpdated<o?n():l.lastUpdated>o?d(l):l.lastUpdated===o&&console.log("app in sync with user doc"))}),{get authRedirect(){return t(w)},set authRedirect(e){r(w,s(e))},get username(){return t(a)},set username(e){r(a,s(e)),o=Date.now(),n()},get themeName(){return t(p)},set themeName(e){r(p,s(e)),o=Date.now(),n()},get theme(){return t(b)},get spellcheck(){return t(m)},set spellcheck(e){r(m,s(e)),o=Date.now(),n()},get showFolderPreview(){return t(c)},set showFolderPreview(e){r(c,s(e)),o=Date.now(),n()},get showFolderName(){return t(u)},set showFolderName(e){r(u,s(e)),o=Date.now(),n()}}}const g=Symbol("app"),D=()=>{const i=P();return F(g,i)},C=()=>v(g);export{C as g,D as s};
