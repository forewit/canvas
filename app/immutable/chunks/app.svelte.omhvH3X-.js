import{p as t}from"./if.DxqyGXBG.js";import{i as b,j as F,k as r,l as s,m as i}from"./runtime.De9YyAkO.js";import{g as d}from"./firebase.svelte.DK2MtVdp.js";function O(){const p=d();let o=0,h=i(""),w=i(""),c=i("Canvas"),u=i(!0),a=i(!0),m=i(!0);function n(){p.publishDoc([],{lastUpdated:o,theme:r(c),spellcheck:r(u),username:r(h)})}function g(e){Object.hasOwn(e,"username")&&typeof e.username=="string"&&s(h,t(e.username)),Object.hasOwn(e,"theme")&&typeof e.theme=="string"&&s(c,t(e.theme)),Object.hasOwn(e,"spellcheck")&&typeof e.spellcheck=="boolean"&&s(u,t(e.spellcheck)),Object.hasOwn(e,"showFolderPreview")&&typeof e.showFolderPreview=="boolean"&&s(a,t(e.showFolderPreview)),Object.hasOwn(e,"showFolderName")&&typeof e.showFolderName=="boolean"&&s(m,t(e.showFolderName))}return p.subscribeToDoc([],(e,l)=>{p.isLoading||l===null||(l.lastUpdated===void 0||l.lastUpdated<o?n():l.lastUpdated>o?g(l):l.lastUpdated===o&&console.log("app in sync with user doc"))}),{get authRedirect(){return r(w)},set authRedirect(e){s(w,t(e))},get username(){return r(h)},set username(e){s(h,t(e)),o=Date.now(),n()},get theme(){return r(c)},set theme(e){s(c,t(e)),o=Date.now(),n()},get spellcheck(){return r(u)},set spellcheck(e){s(u,t(e)),o=Date.now(),n()},get showFolderPreview(){return r(a)},set showFolderPreview(e){s(a,t(e)),o=Date.now(),n()},get showFolderName(){return r(m)},set showFolderName(e){s(m,t(e)),o=Date.now(),n()}}}const f=Symbol("app"),P=()=>{const p=O();return b(f,p)},x=()=>F(f);export{x as g,P as s};
