import{s as f,k as a,h as c}from"./runtime.Dbv-XAo5.js";import{p as s}from"./proxy.DQSHHu_B.js";function U(){let o=f(0),l=f("Canvas"),h=f(!0),p=f(s({})),g=!1,d=[];const r=function(){d.forEach(t=>t())},e=function(t){return d.push(t),()=>{d=d.filter(n=>n!==t)}},i=function(t){g=!0;const n=t();return g=!1,n};return new Proxy({get lastUpdated(){return a(o)},set lastUpdated(t){c(o,s(t))},get themeName(){return a(l)},set themeName(t){c(l,s(t))},get spellcheck(){return a(h)},set spellcheck(t){c(h,s(t))},get paths(){return a(p)},set paths(t){c(p,s(new Proxy(t,{set(n,u,P){return P===n[u]||(n[u]=P,c(o,s(Date.now())),r()),!0},deleteProperty(n,u){return u in n?(delete n[u],c(o,s(Date.now())),r(),!0):!1}})))},get subscribe(){return e},get untrack(){return i}},{set(t,n,u){return u===t[n]||(t[n]=u,g||(t.lastUpdated=Date.now(),r())),!0},get(t,n){return t[n]}})}const b=U(),m=function(){let o=f("/"),l=f("/");return{get authRedirect(){return a(o)},set authRedirect(h){c(o,s(h))},get currentPath(){return a(l)},set currentPath(h){c(l,s(h))}}},w=m();function y(){let o=[],l=f(s({}));c(l,s(new Proxy(a(l),{set(r,e,i){return i===r[e]||(r[e]=h(e,i),b.paths[e]=w.currentPath,d(e)),!0},deleteProperty(r,e){return e in r?(delete r[e],delete b.paths[e],d(e),!0):!1}})));const h=function(r,e){let i=f(s(e.lastUpdated)),t=f(s(e.title)),n=f(s(e.content));return{get lastUpdated(){return a(i)},get title(){return a(t)},set title(u){u!==a(t)&&(c(t,s(u)),c(i,s(Date.now())),d(r))},get content(){return a(n)},set content(u){u!==a(n)&&(c(n,s(u)),c(i,s(Date.now())),d(r))}}},p=function(r){const e=crypto.randomUUID().slice(0,8),i=r||{lastUpdated:Date.now(),title:"Untitled",content:""};return a(l)[e]=i,e},g=function(r){return o.push(r),()=>{o=o.filter(e=>e!==r)}},d=function(r){o.forEach(e=>e(r))};return{get pages(){return a(l)},get subscribe(){return g},get newPage(){return p}}}const S=y();export{w as a,S as p,b as u};
