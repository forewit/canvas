import{s as l,g as u,h as s}from"./runtime.DKEa1FBX.js";import{p as n}from"./proxy.DawioJ69.js";function p(){let c=[],a=l(n({}));u(a,n(new Proxy(s(a),{set(e,t,r){return r===e[t]||(e[t]=g(t,r),i(t)),!0},deleteProperty(e,t){return t in e?(delete e[t],i(t),!0):!1}})));const g=function(e,t){let r=l(n(t.lastUpdated)),f=l(n(t.title)),d=l(n(t.content));return{get lastUpdated(){return s(r)},get title(){return s(f)},set title(o){o!==s(f)&&(u(f,n(o)),u(r,n(Date.now())),i(e))},get content(){return s(d)},set content(o){o!==s(d)&&(u(d,n(o)),u(r,n(Date.now())),i(e))}}},U=function(e){const t=crypto.randomUUID().slice(0,8),r=e||{lastUpdated:Date.now(),title:"Untitled",content:""};return s(a)[t]=r,t},b=function(e){return c.push(e),()=>{c=c.filter(t=>t!==e)}},i=function(e){c.forEach(t=>t(e))};return{get pages(){return s(a)},get subscribe(){return b},get newPage(){return U}}}const m=p();export{m as p};
