var P=e=>{throw TypeError(e)};var C=(e,t,a)=>t.has(e)||P("Cannot "+a);var c=(e,t,a)=>(C(e,t,"read from private field"),a?a.call(e):t.get(e)),g=(e,t,a)=>t.has(e)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a);import{h as F,b as R,u as y,q as h,c as p,t as L}from"../chunks/disclose-version.CmAGsPUf.js";import{b as N,E as O,c as B,V as j,F as q,G as z,s as x,u as n,n as S,A as i,v as A,p as _,g as E,P as G}from"../chunks/runtime.Y5gDxlrQ.js";import{p as b,o as K,i as M}from"../chunks/index-client.1MaynjRT.js";import{g as V,s as W,b as Y,P as $}from"../chunks/ProgressBar.COL9vUkR.js";import{g as H}from"../chunks/entry.i0eeY4ru.js";import{h as I}from"../chunks/svelte-head.BqFmhxlh.js";function U(e,t,...a){var s=e,o,f;N(()=>{o!==(o=t())&&(f&&(j(f),f=null),o&&(f=B(()=>o(s,...a))))},O),F&&(s=R)}const J=!0,Q="always",le=Object.freeze(Object.defineProperty({__proto__:null,prerender:J,trailingSlash:Q},Symbol.toStringTag,{value:"Module"}));var d,l;class X{constructor(){g(this,d,x(b(Date.now())));g(this,l,x(b({themeName:"Canvas",spellcheck:!0})));K(()=>{})}get lastUpdated(){return n(c(this,d))}set lastUpdated(t){S(c(this,d),b(t))}get settings(){return n(c(this,l))}set settings(t){S(c(this,l),b(t))}}d=new WeakMap,l=new WeakMap;const k=Symbol("USERSTATE");function Z(){return q(k,new X)}function w(){return z(k)}const ee=function(){const e=V(),t=w();i(()=>{!e.userDocData||!e.userDocData.lastUpdated||!e.userDocData.settings||typeof e.userDocData.lastUpdated!="number"||A(()=>{t.lastUpdated<e.userDocData.lastUpdated&&(console.warn("Overwriting user state with more recent data from firestore"),t.settings={...t.settings,...e.userDocData.settings})})})},te=[{name:"Canvas",bg:"#f0f0f0",bgAlt:"#e6e6e6",main:"#c2c3cc",card:"#ffffff",error:"#ff5c5c",sub:"#bbbcc7",text:"#1a1a1a"},{name:"Paper",bg:"#eeeeee",bgAlt:"#dddddd",main:"#444444",card:"#444444",error:"#d70000",sub:"#b2b2b2",text:"#444444"},{name:"Rose Pine Dawn",bg:"#fffaf3",bgAlt:"#f0e9df",main:"#56949f",card:"#ea9d34",error:"#b4637a",sub:"#c4a7e7",text:"#286983"},{name:"Blueberry Light",bg:"#dae0f5",bgAlt:"#c1c7df",main:"#506477",card:"#df4576",error:"#df4576",sub:"#92a4be",text:"#678198"},{name:"Repose Dark",bg:"#2f3338",bgAlt:"#3a3c3d",main:"#d6d2bc",card:"#d6d2bc",error:"#ff4a59",sub:"#8f8e84",text:"#d6d2bc"},{name:"Carbon",bg:"#313131",bgAlt:"#2b2b2b",main:"#f66e0d",card:"#f66e0d",error:"#e72d2d",sub:"#616161",text:"#f5e6c8"},{name:"Blueberry Dark",bg:"#212b42",bgAlt:"#1b2334",main:"#add7ff",card:"#962f7e",error:"#df4576",sub:"#5c7da5",text:"#91b4d5"},{name:"One Dark",bg:"#2f343f",bgAlt:"#262b34",main:"#61afef",card:"#61afef",error:"#e06c75",sub:"#eceff4",text:"#98c379"},{name:"Dark Note",bg:"#1f1f1f",bgAlt:"#141414",main:"#f2c17b",card:"#e3dce0",error:"#ff0000",sub:"#768f95",text:"#d2dff4"},{name:"Dark",bg:"#111111",bgAlt:"#191919",main:"#eeeeee",card:"#eeeeee",error:"#da3333",sub:"#444444",text:"#eeeeee"}],D=function(){if(!screen)throw new Error("Cannot update safe areas: screen is not defined");const e=document.documentElement;switch(screen.orientation.type){case"portrait-primary":e.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),e.style.setProperty("--safe-area-left","0px"),e.style.setProperty("--safe-area-right","0px");break;case"landscape-primary":e.style.setProperty("--safe-area-top","0px"),e.style.setProperty("--safe-area-left","env(safe-area-inset-left)"),e.style.setProperty("--safe-area-right","0px");break;case"landscape-secondary":e.style.setProperty("--safe-area-top","0px"),e.style.setProperty("--safe-area-left","0px"),e.style.setProperty("--safe-area-right","env(safe-area-inset-right)");break}};var ae=L('<meta name="theme-color" content="var(--bg)">');function re(e,t){_(t,!0);const a=w();let s=G(()=>te.find(r=>r.name===a.settings.themeName));i(()=>{const r=A(()=>document.documentElement);n(s)&&(r.style.setProperty("--bg",n(s).bg),r.style.setProperty("--bg-alt",n(s).bgAlt),r.style.setProperty("--main",n(s).main),r.style.setProperty("--card",n(s).card),r.style.setProperty("--error",n(s).error),r.style.setProperty("--sub",n(s).sub),r.style.setProperty("--text",n(s).text))}),i(()=>(screen.orientation.addEventListener("change",D),()=>screen.orientation.removeEventListener("change",D)));var o=y();I(r=>{var m=ae();p(r,m)});var f=h(o);U(f,()=>t.children),p(e,o),E()}function be(e,t){_(t,!0);const a=W(),s=Y();Z(),ee(),i(()=>{s.authRedirect=window.location.pathname}),i(()=>{!a.user&&!a.isLoading&&H("/login/")}),re(e,{children:(o,f)=>{var r=y(),m=h(r);M(m,()=>a.isLoading,u=>{$(u)},u=>{var v=y(),T=h(v);U(T,()=>t.children),p(u,v)}),p(o,r)},$$slots:{default:!0}}),E()}export{be as component,le as universal};
