import{a as r,t as k,c as ae,d as j}from"../chunks/disclose-version.CXW4hvun.js";import{W as le,n as re,Y as ie,ae as W,ad as he,o as e,p as q,w as Z,ab as c,af as l,ac as d,ag as M,aa as y,D as be,au as xe}from"../chunks/runtime.yvz7FmBg.js";import{s as F}from"../chunks/render.C8PyxL23.js";import{B as h,e as ne,i as se}from"../chunks/Button.TkJNKYea.js";import{d as ye}from"../chunks/events.DG9fI-xF.js";import{b}from"../chunks/paths.C9diV88m.js";import{s as J,b as ke,g as Pe}from"../chunks/app.svelte.ClmCL5DG.js";import{g as we,a as Ue}from"../chunks/directories.svelte.56ieZ2oG.js";import{p as O,i as Y}from"../chunks/if.B2S0hjCB.js";import{p as D}from"../chunks/index-client.D7LoYvvJ.js";var ze=k('<li><div class="button svelte-rpge36"><!></div></li>'),Le=k('<div class="button svelte-rpge36"><!></div> <!>',1),Re=k('<div class="button svelte-rpge36"><!></div>'),Ce=k("<li><!></li>"),Ze=k('<ol class="svelte-rpge36"></ol>'),De=k('<div class="tree-panel theme-panel svelte-rpge36"><div class="controls svelte-rpge36"><p class="title svelte-rpge36">My Project</p> <!> <!> <!></div> <div class="directory svelte-rpge36"><!></div></div>');function Fe(L,t){le(t,!0);const n=(i,E=he,K)=>{let de=be(()=>xe(K==null?void 0:K(),0));var ve=ae(),ue=W(ve);Y(ue,()=>E().type==="folder",ge=>{var G=Ze();ne(G,21,()=>E().children,se,(_e,s)=>{var ce=ae(),pe=W(ce);Y(pe,()=>t.tree[e(s)].type==="page",Q=>{var I=ze(),A=c(I),V=c(A),B=Z(()=>e(o)===e(s)),X=Z(()=>e(o)===e(s)?0:void 0);h(V,{get selected(){return e(B)},get tabindex(){return e(X)},iconURL:`${b??""}/images/icons/font-awesome/feather.svg`,onclick:()=>{a(e(s))},children:($,C)=>{M();var z=j();y(()=>F(z,t.tree[e(s)].name)),r($,z)},$$slots:{default:!0}}),d(A),d(I),y(()=>J(A,"id",e(s))),r(Q,I)},Q=>{var I=ae(),A=W(I);Y(A,()=>t.tree[e(s)].type==="folder",V=>{var B=Ce(),X=c(B);Y(X,()=>e(m).includes(e(s)),$=>{var C=Le(),z=W(C),ee=c(z),te=Z(()=>e(o)===e(s)),oe=Z(()=>e(o)===e(s)?0:void 0);h(ee,{get selected(){return e(te)},get tabindex(){return e(oe)},iconURL:`${b??""}/images/icons/font-awesome/folder-open.svg`,onclick:()=>{a(e(s))},children:(H,$e)=>{M();var me=j();y(()=>F(me,t.tree[e(s)].name)),r(H,me)},$$slots:{default:!0}}),d(z);var fe=l(z,2);n(fe,()=>t.tree[e(s)],()=>e(de)+1),y(()=>J(z,"id",e(s))),r($,C)},$=>{var C=Re(),z=c(C),ee=Z(()=>e(o)===e(s)),te=Z(()=>e(o)===e(s)?0:void 0);h(z,{get selected(){return e(ee)},get tabindex(){return e(te)},iconURL:`${b??""}/images/icons/font-awesome/folder-closed.svg`,onclick:()=>{a(e(s))},children:(oe,fe)=>{M();var H=j();y(()=>F(H,t.tree[e(s)].name)),r(oe,H)},$$slots:{default:!0}}),d(C),y(()=>J(C,"id",e(s))),r($,C)}),d(B),r(V,B)},null,!0),r(Q,I)}),r(_e,ce)}),d(G),y(()=>J(G,"style",`--depth: ${e(de)??""}`)),r(ge,G)}),r(i,ve)};let f=D(t,"newFolder",3,()=>{}),v=D(t,"newPage",3,()=>{}),U=D(t,"removeChild",3,()=>{});D(t,"active",3,!0);let m=re(O(["root"])),p=re("root"),o=re("root"),R=Z(()=>{for(const i in t.tree)if(t.tree[i].type==="folder"&&t.tree[i].children.includes(e(p)))return i;return"root"});function a(i){t.tree[i].type==="folder"&&(e(m).includes(i)?q(m,O(e(m).filter(E=>E!==i))):e(m).push(i)),q(p,O(i)),q(o,O(i))}function _(i){confirm("Are you sure you want to delete?")&&U()(e(R),i)}var P=De(),w=c(P),N=l(c(w),2);h(N,{iconURL:`${b??""}/images/icons/font-awesome/folder-new.svg`,onclick:()=>{t.tree[e(o)].type==="folder"?(e(m).push(e(o)),q(p,O(e(o))),f()(e(o))):f()(e(R))}});var S=l(N,2);h(S,{iconURL:`${b??""}/images/icons/font-awesome/feather.svg`,onclick:()=>{t.tree[e(o)].type==="folder"?(e(m).push(e(o)),q(p,O(e(o))),v()(e(o))):v()(e(R))}});var u=l(S,2),g=Z(()=>!e(p)||e(p)==="root");h(u,{get disabled(){return e(g)},iconURL:`${b??""}/images/icons/font-awesome/trash.svg`,onclick:()=>{_(e(p))}}),d(w);var x=l(w,2),T=c(x);n(T,()=>t.tree.root),d(x),d(P),r(L,P),ie()}var Ne=k('<div class="page-toolbar theme-toolbar svelte-bvakct"><!> <!> <!></div>');function Te(L,t){let n=D(t,"openTreePanel",3,()=>{}),f=D(t,"openSettingsPanel",3,()=>{});var v=Ne(),U=c(v);h(U,{iconURL:`${b??""}/images/icons/font-awesome/home.svg`,href:`${b??""}/`});var m=l(U,2);h(m,{iconURL:`${b??""}/images/icons/font-awesome/folder-closed.svg`,get onclick(){return f()}});var p=l(m,2);h(p,{get onclick(){return n()},children:(o,R)=>{M();var a=j();y(()=>F(a,t.title)),r(o,a)},$$slots:{default:!0}}),d(v),r(L,v)}var je=k("<!> <!> <!>",1),Me=k('<div class="zoom-toolbar theme-toolbar svelte-16pmxx3"><!></div>');function Se(L,t){le(t,!0);let n=D(t,"zoom",15,0),f=D(t,"zoomLevels",19,()=>[.25,.5,.75,1,1.25,1.5,1.75,2]);function v(){const a=f().find(_=>_>n());n(a!==void 0?a:f()[f().length-1])}function U(){const a=f().toReversed().find(_=>_<n());n(a!==void 0?a:f()[0])}function m(){const a=f().find(_=>_>n());n(a!==void 0?a:f()[0])}function p(){n(1)}var o=Me(),R=c(o);Y(R,()=>t.variant==="alt",a=>{var _=je(),P=W(_);h(P,{iconURL:`${b??""}/images/icons/font-awesome/zoom-out.svg`,onclick:U});var w=l(P,2);h(w,{onclick:p,children:(S,u)=>{M();var g=j();y(()=>F(g,`${Math.round(n()*100)??""}%`)),r(S,g)},$$slots:{default:!0}});var N=l(w,2);h(N,{iconURL:`${b??""}/images/icons/font-awesome/zoom-in.svg`,onclick:v}),r(a,_)},a=>{h(a,{onclick:m,children:(_,P)=>{M();var w=j();y(()=>F(w,`${Math.round(n()*100)??""}%`)),r(_,w)},$$slots:{default:!0}})}),d(o),r(L,o),ie()}var Ie=(L,t,n)=>{delete t.tree[e(n)]},Oe=k('<p> <button class="close-page-button">❌</button></p>'),Ae=k('<p> <button class="close-page-button">❌</button></p>'),Be=k('<div class="page-container svelte-yytkj3"><header></header> <main class="svelte-yytkj3"><!> <!> <!></main> <footer class="svelte-yytkj3"><!> <section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer></div>');function Xe(L,t){le(t,!0);const n=ke(),f=we();Pe();const v=Ue();var U=Be(),m=l(c(U),2),p=c(m);Te(p,{title:"My Page"});var o=l(p,2);Se(o,{variant:"alt",get zoom(){return n.zoom},set zoom(u){n.zoom=u}});var R=l(o,2);Fe(R,{get tree(){return v.tree},newPage:u=>{const g=crypto.randomUUID().slice(0,8);f[g]={lastUpdated:Date.now(),title:"Untitled",content:""},v.addPageID(u,g)},newFolder:u=>{v.addSubfolder(u)},removeChild:(u,g)=>{v.removeChild(u,g)}}),d(m);var a=l(m,2),_=c(a);h(_,{iconURL:`${b??""}/images/icons/gear.svg`,href:`${b??""}/profile`,children:(u,g)=>{M();var x=j("Settings");r(u,x)},$$slots:{default:!0}});var P=l(_,2),w=l(c(P),2);ne(w,17,()=>v.orphanedFolders,se,(u,g)=>{var x=Oe(),T=c(x),i=l(T);i.__click=[Ie,v,g],d(x),y(()=>F(T,`💀📁 ${v.tree[e(g)].name??""}`)),r(u,x)}),d(P);var N=l(P,2),S=l(c(N),2);ne(S,17,()=>v.orphanedPages,se,(u,g)=>{var x=Ae(),T=c(x),i=l(T);i.__click=()=>{delete f[e(g)]},d(x),y(()=>F(T,`💀📄 ${f[e(g)].title??""}`)),r(u,x)}),d(N),d(a),d(U),r(L,U),ie()}ye(["click"]);export{Xe as component};
