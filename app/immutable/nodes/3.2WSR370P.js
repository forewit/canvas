import{h as g,z as T,y as C,c,v as x,w as o,t as h,x as R}from"../chunks/disclose-version.Dwjb0r68.js";import{N as D,O as F,P as G,w as q,C as I,x as E,h as i,f as u,s as m}from"../chunks/runtime.CV-FRLlh.js";import{P as M,f as b,g as V}from"../chunks/ProgressBar.BgL6fn2h.js";import{b as W,g as Y}from"../chunks/entry.CDEZsZDx.js";import{e as j}from"../chunks/events.dPbSfJbf.js";import{i as w}from"../chunks/index-client.j3BmQV3R.js";import{a as H}from"../chunks/authUtils.CzOb3DZR.js";let L=!1;function O(){L||(L=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const s of e.target.elements)(r=s.__on_r)==null||r.call(s)})},{capture:!0}))}function k(e){if(g){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var t=e.value;A(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var a=e.checked;A(e,"checked",null),e.checked=a}}};e.__on_r=s,D(s),O()}}function A(e,r,s,t){s=s==null?null:s+"";var a=e.__attributes??(e.__attributes={});g&&(a[r]=e.getAttribute(r),r==="src"||r==="href"||r==="srcset")||a[r]!==(a[r]=s)&&(r==="loading"&&(e[F]=s),s===null?e.removeAttribute(r):e.setAttribute(r,s))}function J(e,r,s,t=s){e.addEventListener(r,s);const a=e.__on_r;a?e.__on_r=()=>{a(),t()}:e.__on_r=t,O()}function S(e,r,s){J(e,"input",()=>{s(z(e)?P(e.value):e.value)}),G(()=>{var t=r();if(g&&e.defaultValue!==e.value){s(e.value);return}z(e)&&t===P(e.value)||e.type==="date"&&!t&&!e.value||(e.value=t??"")})}function z(e){var r=e.type;return r==="number"||r==="range"}function P(e){return e===""?null:+e}var K=h('<b class="error svelte-lz3ywn">Wrong password!</b>'),Q=h('<form class="form svelte-lz3ywn"><input class="email svelte-lz3ywn" type="email" placeholder="Email" required> <input class="password svelte-lz3ywn" type="password" placeholder="Password" required> <!> <input type="submit" value="Login" class="btn svelte-lz3ywn"></form>');function U(e,r){q(r,!0);let s=m(""),t=m(""),a=m(!1);async function _(){try{u(a,!1),await H(i(s),i(t)),r.onSuccessfulLogin()}catch{console.log("Login failed!"),u(a,!0)}}I(()=>{b.user&&r.onSuccessfulLogin()});var p=T(),B=C(p);w(B,()=>b.user,l=>{M(l)},l=>{var f=Q(),d=x(f);k(d);var v=o(o(d,!0));k(v);var y=o(o(v,!0));w(y,()=>i(a),n=>{var N=K();c(n,N)}),o(o(y,!0)),R(f),j("submit",f,_),S(d,()=>i(s),n=>u(s,n)),S(v,()=>i(t),n=>u(t,n)),c(l,f)}),c(e,p),E()}var X=h('<div class="form-container svelte-swxtik"><!></div>');function oe(e,r){q(r,!0);const s=V();function t(){s.authRedirect===`${W}/login/`&&(s.authRedirect="/"),Y(s.authRedirect)}var a=X(),_=x(a);U(_,{onSuccessfulLogin:t}),R(a),c(e,a),E()}export{oe as component};
