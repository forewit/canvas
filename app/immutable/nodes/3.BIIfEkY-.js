import{a as S,t as F,c as fe}from"../chunks/disclose-version.Bss9YEfS.js";import{v as de,h as _e,a5 as oe,i as H,k as B,j as pe,D as be,W as le,H as me,r as j,m as G,q as R,n as ie,o as ce,p as he,a6 as ge,B as ke,L as ee,a7 as X,e as te,a8 as Z,a9 as xe,aa as qe,I as ae,ab as Ee,V as Ie,ac as Ae,t as Pe,z as Ce,Q as Te,ad as De,y as we,Y as ye,a4 as z,ae as V,Z as Ne,_ as D,$ as h,a0 as I,d as A,f as Se}from"../chunks/runtime.DmOoDO8L.js";import{s as Q}from"../chunks/render.CoRXDfMe.js";import{i as He}from"../chunks/if.B6n-4H67.js";import{s as Fe,r as re}from"../chunks/attributes.DpmCKYLT.js";import{d as Oe}from"../chunks/events.Du4FB5lO.js";import{b as ne}from"../chunks/input.sp18iOmy.js";import{g as Re}from"../chunks/entry.iR0Iyisb.js";import{b as ue}from"../chunks/paths.BcAyrczY.js";import{g as Me}from"../chunks/app.svelte.BWuOJ9-F.js";import{g as Le}from"../chunks/pages.svelte.5UBFrZHS.js";import{g as Ue}from"../chunks/firebase.svelte.DiKDFXPg.js";import{g as $e}from"../chunks/directories.svelte.CgkLBlDu.js";let W=null;function M(c,e){return e}function Ve(c,e,a,t){for(var f=[],d=e.length,l=0;l<d;l++)Ee(e[l].e,f,!0);var P=d>0&&f.length===0&&a!==null;if(P){var x=a.parentNode;Ie(x),x.append(a),t.clear(),y(c,e[0].prev,e[d-1].next)}Ae(f,()=>{for(var q=0;q<d;q++){var p=e[q];P||(t.delete(p.k),y(c,p.prev,p.next)),Pe(p.e,!P)}})}function L(c,e,a,t,f,d=null){var l=c,P={flags:e,items:new Map,first:null},x=(e&oe)!==0;if(x){var q=c;l=H?B(Ce(q)):q.appendChild(de())}H&&pe();var p=null;_e(()=>{var r=a(),b=be(r)?r:r==null?[]:le(r),i=b.length;let u=!1;if(H){var C=l.data===me;C!==(i===0)&&(l=j(),B(l),G(!1),u=!0)}if(H){for(var T=null,w,k=0;k<i;k++){if(R.nodeType===8&&R.data===Te){l=R,u=!0,G(!1);break}var n=b[k],s=t(n,k);w=ve(R,P,T,null,n,s,k,f,e),P.items.set(s,w),T=w}i>0&&B(j())}H||Ye(b,P,l,f,e,t),d!==null&&(i===0?p?ie(p):p=ce(()=>d(l)):p!==null&&he(p,()=>{p=null})),u&&G(!0)}),H&&(l=R)}function Ye(c,e,a,t,f,d){var O,U,$,J;var l=(f&De)!==0,P=(f&(X|Z))!==0,x=c.length,q=e.items,p=e.first,r=p,b,i=null,u,C=[],T=[],w,k,n,s;if(l)for(s=0;s<x;s+=1)w=c[s],k=d(w,s),n=q.get(k),n!==void 0&&((O=n.a)==null||O.measure(),(u??(u=new Set)).add(n));for(s=0;s<x;s+=1){if(w=c[s],k=d(w,s),n=q.get(k),n===void 0){var Y=r?r.e.nodes_start:a;i=ve(Y,e,i,i===null?e.first:i.next,w,k,s,t,f),q.set(k,i),C=[],T=[],r=i.next;continue}if(P&&Be(n,w,s,f),n.e.f&ge&&(ie(n.e),l&&((U=n.a)==null||U.unfix(),(u??(u=new Set)).delete(n))),n!==r){if(b!==void 0&&b.has(n)){if(C.length<T.length){var m=T[0],o;i=m.prev;var g=C[0],_=C[C.length-1];for(o=0;o<C.length;o+=1)se(C[o],m,a);for(o=0;o<T.length;o+=1)b.delete(T[o]);y(e,g.prev,_.next),y(e,i,g),y(e,_,m),r=m,i=_,s-=1,C=[],T=[]}else b.delete(n),se(n,r,a),y(e,n.prev,n.next),y(e,n,i===null?e.first:i.next),y(e,i,n),i=n;continue}for(C=[],T=[];r!==null&&r.k!==k;)(b??(b=new Set)).add(r),T.push(r),r=r.next;if(r===null)continue;n=r}C.push(n),i=n,r=n.next}if(r!==null||b!==void 0){for(var v=b===void 0?[]:le(b);r!==null;)v.push(r),r=r.next;var E=v.length;if(E>0){var N=f&oe&&x===0?a:null;if(l){for(s=0;s<E;s+=1)($=v[s].a)==null||$.measure();for(s=0;s<E;s+=1)(J=v[s].a)==null||J.fix()}Ve(e,v,N,q)}}l&&ke(()=>{var K;if(u!==void 0)for(n of u)(K=n.a)==null||K.apply()}),ee.first=e.first&&e.first.e,ee.last=i&&i.e}function Be(c,e,a,t){t&X&&te(c.v,e),t&Z?te(c.i,a):c.i=a}function ve(c,e,a,t,f,d,l,P,x){var q=W;try{var p=(x&X)!==0,r=(x&xe)===0,b=p?r?qe(f):ae(f):f,i=x&Z?ae(l):l,u={i,v:b,k:d,a:null,e:null,prev:a,next:t};return W=u,u.e=ce(()=>P(c,b,i),H),u.e.prev=a&&a.e,u.e.next=t&&t.e,a===null?e.first=u:(a.next=u,a.e.next=u.e),t!==null&&(t.prev=u,t.e.prev=u.e),u}finally{W=q}}function se(c,e,a){for(var t=c.next?c.next.e.nodes_start:a,f=e?e.e.nodes_start:a,d=c.e.nodes_start;d!==t;){var l=we(d);f.before(d),d=l}}function y(c,e,a){e===null?c.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var Ge=F('<p>/</p> <button class="svelte-qe3mac"> </button>',1),ze=F('<div class="folder svelte-qe3mac"><p>📁</p> <input type="text"> <button class="goto-folder-button svelte-qe3mac">Go</button> <button class="close-folder-button svelte-qe3mac">❌</button></div>'),Qe=(c,e)=>Re(ue+"/"+A(e)+"/"),We=F('<div class="page svelte-qe3mac"><p>📄</p> <input type="text"> <button class="goto-page-button svelte-qe3mac">Go</button> <button class="close-page-button svelte-qe3mac">❌</button></div>'),Xe=F('<div class="page svelte-qe3mac"><p> </p> <button class="close-page-button svelte-qe3mac">❌</button></div>'),Ze=F('<div class="page svelte-qe3mac"><p> </p> <button class="close-page-button svelte-qe3mac">❌</button></div>'),Je=F('<header class="svelte-qe3mac"><button class="new-page-button svelte-qe3mac">+📄</button> <button class="new-folder-button svelte-qe3mac">+📁</button> <a><button class="profile-button svelte-qe3mac">Profile</button></a></header> <main><section id="path" class="svelte-qe3mac"><button class="directory-back-button svelte-qe3mac">🔙</button> <!></section> <section id="folders"><!></section> <section id="pages"></section></main> <footer class="svelte-qe3mac"><section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer>',1);function vt(c,e){ye(e,!0),Me();const a=Le();Ue();const t=$e();let f=Se(()=>Object.keys(a).filter(m=>t.currentFolder.pages&&t.currentFolder.pages.includes(m)));var d=Je(),l=z(d),P=D(l);P.__click=()=>{const m=crypto.randomUUID().slice(0,8),o={title:"New Page",content:"",lastUpdated:Date.now()};a[m]=o,t.addPageID(m)};var x=h(P,2);x.__click=()=>{t.addSubfolder()};var q=h(x,2);Fe(q,"href",`${ue??""}/profile`),I(l);var p=h(l,2),r=D(p),b=D(r);b.__click=()=>{t.currentPath.length>1&&t.currentPath.pop()};var i=h(b,2);L(i,17,()=>t.currentPath,M,(m,o,g)=>{var _=Ge(),v=h(z(_),2);v.__click=()=>t.currentPath=t.currentPath.slice(0,g+1);var E=D(v);I(v),V(()=>Q(E,t.folders[A(o)].name)),S(m,_)}),I(r);var u=h(r,2),C=D(u);He(C,()=>t.currentFolder.subfolders,m=>{var o=fe(),g=z(o);L(g,17,()=>t.currentFolder.subfolders,M,(_,v)=>{var E=ze(),N=h(D(E),2);re(N);var O=h(N,2);O.__click=()=>{t.currentPath.push(A(v))};var U=h(O,2);U.__click=()=>t.removeSubfolder(A(v)),I(E),ne(N,()=>t.folders[A(v)].name,$=>t.folders[A(v)].name=$),S(_,E)}),S(m,o)}),I(u);var T=h(u,2);L(T,21,()=>A(f),M,(m,o)=>{var g=We(),_=h(D(g),2);re(_);var v=h(_,2);v.__click=[Qe,o];var E=h(v,2);E.__click=()=>{t.removePageID(A(o)),delete a[A(o)]},I(g),ne(_,()=>a[A(o)].title,N=>a[A(o)].title=N),S(m,g)}),I(T),I(p);var w=h(p,2),k=D(w),n=h(D(k),2);L(n,17,()=>t.orphanedFolders,M,(m,o)=>{var g=Xe(),_=D(g),v=D(_);I(_);var E=h(_,2);E.__click=()=>{delete t.folders[A(o)]},I(g),V(()=>Q(v,`💀📁 ${t.folders[A(o)].name??""}`)),S(m,g)}),I(k);var s=h(k,2),Y=h(D(s),2);L(Y,17,()=>t.orphanedPages,M,(m,o)=>{var g=Ze(),_=D(g),v=D(_);I(_);var E=h(_,2);E.__click=()=>{delete a[A(o)]},I(g),V(()=>Q(v,`💀📄 ${a[A(o)].title??""}`)),S(m,g)}),I(s),I(w),V(()=>b.disabled=t.currentPath.length<=1),S(c,d),Ne()}Oe(["click"]);export{vt as component};
