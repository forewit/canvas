import{h as g,u as O,q as T,c as _,m as P,n as o,t as h,r as q}from"../chunks/disclose-version.CmAGsPUf.js";import{I as D,L as G,J,p as R,A as M,g as E,u as l,n as c,s as m}from"../chunks/runtime.Y5gDxlrQ.js";import{g as N,P as V,a as W}from"../chunks/ProgressBar.COL9vUkR.js";import{b as Y,g as j}from"../chunks/entry.i0eeY4ru.js";import{e as C}from"../chunks/events.0Pp6qAY_.js";import{i as y}from"../chunks/index-client.1MaynjRT.js";import{a as H}from"../chunks/authUtils.Ds6js9lb.js";let w=!1;function x(){w||(w=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const s of e.target.elements)(r=s.__on_r)==null||r.call(s)})},{capture:!0}))}function L(e){if(g){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var t=e.value;A(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var a=e.checked;A(e,"checked",null),e.checked=a}}};e.__on_r=s,D(s),x()}}function A(e,r,s,t){s=s==null?null:s+"";var a=e.__attributes??(e.__attributes={});g&&(a[r]=e.getAttribute(r),r==="src"||r==="href"||r==="srcset")||a[r]!==(a[r]=s)&&(r==="loading"&&(e[G]=s),s===null?e.removeAttribute(r):e.setAttribute(r,s))}function K(e,r,s,t=s){e.addEventListener(r,s);const a=e.__on_r;a?e.__on_r=()=>{a(),t()}:e.__on_r=t,x()}function k(e,r,s){K(e,"input",()=>{s(S(e)?z(e.value):e.value)}),J(()=>{var t=r();if(g&&e.defaultValue!==e.value){s(e.value);return}S(e)&&t===z(e.value)||e.type==="date"&&!t&&!e.value||(e.value=t??"")})}function S(e){var r=e.type;return r==="number"||r==="range"}function z(e){return e===""?null:+e}var Q=h('<b class="error svelte-lz3ywn">Wrong password!</b>'),U=h('<form class="form svelte-lz3ywn"><input class="email svelte-lz3ywn" type="email" placeholder="Email" required> <input class="password svelte-lz3ywn" type="password" placeholder="Password" required> <!> <input type="submit" value="Login" class="btn svelte-lz3ywn"></form>');function X(e,r){R(r,!0);const s=N();let t=m(""),a=m(""),n=m(!1);async function B(){try{c(n,!1),await H(l(t),l(a)),r.onSuccessfulLogin()}catch{console.log("Login failed!"),c(n,!0)}}M(()=>{s.user&&r.onSuccessfulLogin()});var p=O(),F=T(p);y(F,()=>s.user,f=>{V(f)},f=>{var u=U(),d=P(u);L(d);var v=o(o(d,!0));L(v);var b=o(o(v,!0));y(b,()=>l(n),i=>{var I=Q();_(i,I)}),o(o(b,!0)),q(u),C("submit",u,B),k(d,()=>l(t),i=>c(t,i)),k(v,()=>l(a),i=>c(a,i)),_(f,u)}),_(e,p),E()}var Z=h('<div class="form-container svelte-swxtik"><!></div>');function ne(e,r){R(r,!0);const s=W();function t(){s.authRedirect===`${Y}/login/`&&(s.authRedirect="/"),j(s.authRedirect)}var a=Z(),n=P(a);X(n,{onSuccessfulLogin:t}),q(a),_(e,a),E()}export{ne as component};
