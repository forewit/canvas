import{h as R,c as _e,d as fe,r as te,b as ae,s as U,a as O,i as de,E as L,u as Q,v as $,l as he,w as be,x as ge,y as me,q as re,n as I,z as s,f as C,t as M,o as w,p as ke}from"../chunks/disclose-version.D20hR_a1.js";import{b as Ee,i as ye,r as ue,a as ve,p as Se,I as xe,q as Ae,m as ne,c as se,G as ze,s as le,J as Te,K as Ie,d as we,h as De,S as Ne,j as Ce,y as Re,M as q,z as He,N as z}from"../chunks/runtime.CAZPmQP8.js";import{s as oe}from"../chunks/render.nAUP4Z2N.js";import{i as Oe}from"../chunks/if.Dht89vhJ.js";import{r as B}from"../chunks/attributes.DAg_Dn2F.js";import{d as Le}from"../chunks/events.USFMG2B6.js";import{b as G}from"../chunks/input.CMh63isw.js";import{p as F,u as J}from"../chunks/pagesState.svelte.C_0Kqgt5.js";import{l as Me}from"../chunks/authUtils.Bop8eAqs.js";import{g as Ye,b as Ue}from"../chunks/entry.DTgK2G_P.js";import{a as A}from"../chunks/appState.svelte.BE77lyH3.js";let K=null;function P(o,e){return e}function qe(o,e,a,u){for(var p=[],c=e.length,v=0;v<c;v++)Te(e[v].e,p,!0);var E=c>0&&p.length===0&&a!==null;if(E){var f=a.parentNode;he(f),f.append(a),u.clear(),D(o,e[0].prev,e[c-1].next)}Ie(p,()=>{for(var g=0;g<c;g++){var d=e[g];E||(u.delete(d.k),D(o,d.prev,d.next)),we(d.e,!E)}})}function V(o,e,a,u,p,c=null){var v=o,E={flags:e,items:new Map,first:null};R&&_e();var f=null;Ee(()=>{var g=a(),d=ye(g)?g:g==null?[]:Array.from(g),r=d.length,m=E.flags;m&$&&!De(d)&&!(Ne in d)&&!(Ce in d)&&(m^=$,m&ge&&!(m&L)&&(m^=L));let l=!1;if(R){var h=v.data===fe;h!==(r===0)&&(v=te(),ae(v),U(!1),l=!0)}if(R){for(var y=null,_,i=0;i<r;i++){if(O.nodeType===8&&O.data===de){v=O,l=!0,U(!1);break}var S=d[i],t=u(S,i);_=ce(O,E,y,null,S,t,i,p,m),E.items.set(t,_),y=_}r>0&&ae(te())}R||Be(d,E,v,p,m,u),c!==null&&(r===0?f?ue(f):f=ve(()=>c(v)):f!==null&&Se(f,()=>{f=null})),l&&U(!0)}),R&&(v=O)}function Be(o,e,a,u,p,c){var X,Z,W,j;var v=(p&be)!==0,E=(p&(L|Q))!==0,f=o.length,g=e.items,d=e.first,r=d,m=new Set,l=null,h=new Set,y=[],_=[],i,S,t,n;if(v)for(n=0;n<f;n+=1)i=o[n],S=c(i,n),t=g.get(S),t!==void 0&&((X=t.a)==null||X.measure(),h.add(t));for(n=0;n<f;n+=1){if(i=o[n],S=c(i,n),t=g.get(S),t===void 0){var x=r?r.e.nodes.start:a;l=ce(x,e,l,l===null?e.first:l.next,i,S,n,u,p),g.set(S,l),y=[],_=[],r=l.next;continue}if(E&&Ge(t,i,n,p),t.e.f&xe&&(ue(t.e),v&&((Z=t.a)==null||Z.unfix(),h.delete(t))),t!==r){if(m.has(t)){if(y.length<_.length){var k=_[0],b;l=k.prev;var T=y[0],H=y[y.length-1];for(b=0;b<y.length;b+=1)ie(y[b],k,a);for(b=0;b<_.length;b+=1)m.delete(_[b]);D(e,T.prev,H.next),D(e,l,T),D(e,H,k),r=k,l=H,n-=1,y=[],_=[]}else m.delete(t),ie(t,r,a),D(e,t.prev,t.next),D(e,t,l===null?e.first:l.next),D(e,l,t),l=t;continue}for(y=[],_=[];r!==null&&r.k!==S;)m.add(r),_.push(r),r=r.next;if(r===null)continue;t=r}y.push(t),l=t,r=t.next}const N=Array.from(m);for(;r!==null;)N.push(r),r=r.next;var Y=N.length;if(Y>0){var pe=p&me&&f===0?a:null;if(v){for(n=0;n<Y;n+=1)(W=N[n].a)==null||W.measure();for(n=0;n<Y;n+=1)(j=N[n].a)==null||j.fix()}qe(e,N,pe,g)}v&&Ae(()=>{var ee;for(t of h)(ee=t.a)==null||ee.apply()}),ne.first=e.first&&e.first.e,ne.last=l&&l.e}function Ge(o,e,a,u){u&L&&se(o.v,e),u&Q?se(o.i,a):o.i=a}function ce(o,e,a,u,p,c,v,E,f){var g=K;try{var d=(f&L)!==0,r=(f&$)===0,m=d?r?ze(p):le(p):p,l=f&Q?le(v):v,h={i:l,v:m,k:c,a:null,e:null,prev:a,next:u};return K=h,h.e=ve(()=>E(o,m,l),R),h.e.prev=a&&a.e,h.e.next=u&&u.e,a===null?e.first=h:(a.next=h,a.e.next=h.e),u!==null&&(u.prev=h,u.e.prev=h.e),h}finally{K=g}}function ie(o,e,a){for(var u=o.next?o.next.e.nodes.start:a,p=e?e.e.nodes.start:a,c=o.e.nodes.start;c!==u;){var v=c.nextSibling;p.before(c),c=v}}function D(o,e,a){e===null?o.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var Ke=()=>{Me()},Pe=()=>{J.get().spellcheck=!J.get().spellcheck},Ve=M('<p>/ <input type="text"></p>'),$e=M("<p> </p>"),Fe=M('<div class="path svelte-2z9p5h"><p>ğŸ“‚</p> <input type="text"> <button class="open-subpath-button svelte-2z9p5h">Go</button> <button class="delete-subpath-button svelte-2z9p5h">âŒ</button></div>'),Je=(o,e)=>Ye(Ue+"/"+e()+"/"),Qe=(o,e)=>delete F.get()[e()],Xe=M('<div class="page svelte-2z9p5h"><p>ğŸ“„</p> <input type="text"> <button class="goto-page-button svelte-2z9p5h">Go</button> <button class="close-page-button svelte-2z9p5h">âŒ</button></div>'),Ze=M('<header class="svelte-2z9p5h"><button class="logout-button svelte-2z9p5h">Logout</button> <button class="spellcheck-button svelte-2z9p5h"> </button> <button class="new-page-button svelte-2z9p5h">+ğŸ“„</button> <button class="new-path-button svelte-2z9p5h">+ğŸ“‚</button></header> <main><div class="current-path svelte-2z9p5h"><button class="back-button svelte-2z9p5h">Back</button> <!></div> <section id="items" class="svelte-2z9p5h"><!> <!></section></main>',1);function ut(o,e){Re(e,!0);var a=Ze(),u=re(a),p=I(u);p.__click=[Ke];var c=s(s(p,!0));c.__click=[Pe];var v=I(c);q(()=>oe(v,`Spellcheck: ${J.get().spellcheck??""}`)),w(c);var E=s(s(c,!0));E.__click=()=>{const _=crypto.randomUUID().slice(0,8),i={title:"New Page",content:"",lastUpdated:Date.now()};F.get()[_]=i,A.directory.pageIDs.push(_)};var f=s(s(E,!0));f.__click=()=>{A.directory.subDirectories.push({name:"New Path",parent:A.directory,pageIDs:[],subDirectories:[]})},w(u);var g=s(s(u,!0)),d=I(g),r=I(d);r.__click=()=>{A.path.length>0&&A.path.pop()};var m=s(s(r,!0));V(m,65,()=>A.path,P,(_,i,S)=>{var t=ke(),n=re(t);Oe(n,()=>S===A.path.length-1,x=>{var k=Ve(),b=s(I(k));B(b),w(k),G(b,()=>z(i).name,T=>z(i).name=T),C(x,k)},x=>{var k=$e(),b=I(k);w(k),q(()=>oe(b,`/ ${z(i).name??""}`)),C(x,k)}),C(_,t)}),w(d);var l=s(s(d,!0)),h=I(l);V(h,65,()=>A.directory.subDirectories,P,(_,i,S)=>{var t=Fe(),n=I(t),x=s(s(n,!0));B(x);var k=s(s(x,!0));k.__click=()=>A.directory=z(i);var b=s(s(k,!0));b.__click=()=>{A.directory.subDirectories.slice(S,1)},w(t),G(x,()=>z(i).name,T=>z(i).name=T),C(_,t)});var y=s(s(h,!0));V(y,65,()=>Object.entries(F.get()),P,(_,i,S)=>{let t=()=>z(z(i))[0],n=()=>z(z(i))[1];var x=Xe(),k=I(x),b=s(s(k,!0));B(b);var T=s(s(b,!0));T.__click=[Je,t];var H=s(s(T,!0));H.__click=[Qe,t],w(x),G(b,()=>n().title,N=>n().title=N),C(_,x)}),w(l),w(g),q(()=>r.disabled=!A.directory.parent),C(o,a),He()}Le(["click"]);export{ut as component};
