import{a as $,t as z,c as te}from"../chunks/disclose-version.CtV2T_1y.js";import{E as ge,aw as he,ax as be,p as xe,o as ye,L as ke,ay as $e,q as Fe,aq as B,az as we,K as ie,m as ne,u as Pe,l as X,O as u,R as v,P as k,ap as q,k as g,M as le,ag as ze,n as Q,Q as re}from"../chunks/runtime.CAgxYfLh.js";import{a as Ce,s as A}from"../chunks/render.BNRf3MrX.js";import{p as ae,a as ce}from"../chunks/if.V5ZpdPWX.js";import{e as M,i as O,F as Te}from"../chunks/Folder.BhKBXwTB.js";import{s as K,r as Ee}from"../chunks/attributes.BKFXZ1zH.js";import{d as Y}from"../chunks/events.BTJ_GI0K.js";import{g as Se}from"../chunks/entry.CXFPDPSw.js";import{b as I}from"../chunks/paths.DQse6YOA.js";import{g as Ie}from"../chunks/app.svelte.D0HLX7g1.js";import{g as Ue}from"../chunks/pages.svelte.DVE_hqwU.js";import{g as qe}from"../chunks/firebase.svelte.DJT-FR9v.js";import{g as de}from"../chunks/directories.svelte.DL5c0pOC.js";import{t as Re,B as H}from"../chunks/TextInput.Dbm3w8yz.js";import{I as J}from"../chunks/Icon.BiCERMJN.js";import{c as Me}from"../chunks/input.CkEbDjpb.js";import{p as Oe}from"../chunks/index-client.DLit8tNq.js";const Ae=requestAnimationFrame,De=()=>performance.now(),E={tick:r=>Ae(r),now:()=>De(),tasks:new Set};function ve(r){E.tasks.forEach(e=>{e.c(r)||(E.tasks.delete(e),e.f())}),E.tasks.size!==0&&E.tick(ve)}function Le(r){let e;return E.tasks.size===0&&E.tick(ve),{promise:new Promise(a=>{E.tasks.add(e={c:r,f:a})}),abort(){E.tasks.delete(e)}}}function j(r,e){r.dispatchEvent(new CustomEvent(e))}function Ne(r){const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function oe(r){const e={},a=r.split(";");for(const t of a){const[l,i]=t.split(":");if(!l||i===void 0)break;const s=Ne(l.trim());e[s]=i.trim()}return e}const Be=r=>r;function je(r,e,a,t){var l=(r&we)!==0,i="both",s,_=e.inert,f,n;function o(){return s??(s=a()(e,(t==null?void 0:t())??{},{direction:i}))}var P={is_global:l,in(){e.inert=_,j(e,"introstart"),f=V(e,o(),n,1,()=>{j(e,"introend"),f==null||f.abort(),f=s=void 0})},out(m){e.inert=!0,j(e,"outrostart"),n=V(e,o(),f,0,()=>{j(e,"outroend"),m==null||m()})},stop:()=>{f==null||f.abort(),n==null||n.abort()}},b=ke;if((b.transitions??(b.transitions=[])).push(P),Ce){var y=l;if(!y){for(var c=b.parent;c&&c.f&ge;)for(;(c=c.parent)&&!(c.f&he););y=!c||(c.f&be)!==0}y&&xe(()=>{ye(()=>P.in())})}}function V(r,e,a,t,l){var i=t===1;if($e(e)){var s,_=!1;return Fe(()=>{if(!_){var F=e({direction:i?"in":"out"});s=V(r,F,a,t,l)}}),{abort:()=>{_=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return l(),{abort:B,deactivate:B,reset:B,t:()=>t};const{delay:f=0,css:n,tick:o,easing:P=Be}=e;var b=[];if(i&&a===void 0&&(o&&o(0,1),n)){var y=oe(n(0,1));b.push(y,y)}var c=()=>1-t,m=r.animate(b,{duration:f});return m.onfinish=()=>{var F=(a==null?void 0:a.t())??1-t;a==null||a.abort();var x=t-F,C=e.duration*Math.abs(x),D=[];if(C>0){if(n)for(var R=Math.ceil(C/16.666666666666668),T=0;T<=R;T+=1){var L=F+x*P(T/R),N=n(L,1-L);D.push(oe(N))}c=()=>{var U=m.currentTime;return F+x*P(U/C)},o&&Le(()=>{if(m.playState!=="running")return!1;var U=c();return o(U,1-U),!0})}m=r.animate(D,{duration:C,fill:"forwards"}),m.onfinish=()=>{c=()=>t,o==null||o(t,1-t),l()}},{abort:()=>{m&&(m.cancel(),m.effect=null)},deactivate:()=>{l=B},reset:()=>{t===0&&(o==null||o(1,0))},t:()=>c()}}function se(r,e=navigator.language){const a=typeof r=="number"?r:r.getTime(),t=Math.round((a-Date.now())/1e3),l=[60,3600,86400,86400*7,86400*30,86400*365,1/0],i=["second","minute","hour","day","week","month","year"],s=l.findIndex(n=>n>Math.abs(t)),_=s?l[s-1]:1;return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(Math.floor(t/_),i[s])}var Ke=z('<button class="page svelte-4d10e3"><p class="title"> </p> <p class="last-updated svelte-4d10e3"> </p></button>');function We(r,e){ie(e,!0);const a=de();let t=ne(ae(se(e.page.lastUpdated)));Pe(()=>{a.currentFolder.pages&&a.currentFolder.pages.length>0&&X(t,ae(se(e.page.lastUpdated)))});var l=Ke();l.__click=function(...n){var o;(o=e.onclick)==null||o.apply(this,n)};var i=u(l),s=u(i);v(i);var _=k(i,2),f=u(_);v(_),v(l),q(()=>{A(s,e.page.title),A(f,g(t))}),$(r,l),le()}Y(["click"]);function Ge(r){const e=r-1;return e*e*e+1}function Qe(r,{delay:e=0,duration:a=400,easing:t=Ge,axis:l="y"}={}){const i=getComputedStyle(r),s=+i.opacity,_=l==="y"?"height":"width",f=parseFloat(i[_]),n=l==="y"?["top","bottom"]:["left","right"],o=n.map(x=>`${x[0].toUpperCase()}${x.slice(1)}`),P=parseFloat(i[`padding${o[0]}`]),b=parseFloat(i[`padding${o[1]}`]),y=parseFloat(i[`margin${o[0]}`]),c=parseFloat(i[`margin${o[1]}`]),m=parseFloat(i[`border${o[0]}Width`]),F=parseFloat(i[`border${o[1]}Width`]);return{delay:e,duration:a,easing:t,css:x=>`overflow: hidden;opacity: ${Math.min(x*20,1)*s};${_}: ${x*f}px;padding-${n[0]}: ${x*P}px;padding-${n[1]}: ${x*b}px;margin-${n[0]}: ${x*y}px;margin-${n[1]}: ${x*c}px;border-${n[0]}-width: ${x*m}px;border-${n[1]}-width: ${x*F}px;`}}var He=(r,e)=>X(e,!g(e)),Je=(r,e)=>X(e,!1),Ve=z('<label><input type="radio" class="svelte-1l8hqeh"></label>'),Xe=z('<div class="color-picker svelte-1l8hqeh"></div>'),Ye=z('<div class="color-picker-container svelte-1l8hqeh"><button class="current-color svelte-1l8hqeh"></button> <!></div>');function Ze(r,e){const a=[];let t=Oe(e,"color",15),l=["red","orange","yellow","green","blue","purple"],i=ne(!1);var s=Ye(),_=u(s);_.__click=[He,i];var f=k(_,2);ce(f,()=>g(i),n=>{var o=Xe();M(o,21,()=>l,O,(P,b)=>{var y=Ve(),c=u(y);Ee(c);var m;c.__click=[Je,i],v(y),q(()=>{m!==(m=g(b))&&(c.value=(c.__value=g(b))==null?"":g(b)),K(c,"style",`background-color: ${g(b)??""}`),Re(c,"selected",t()===g(b))}),Me(a,[],c,()=>(g(b),t()),F=>t(F)),$(P,y)}),v(o),je(3,o,()=>Qe,()=>({duration:200,axis:"x"})),$(n,o)}),v(s),q(()=>K(_,"style",`background-color: ${t()??""}`)),$(r,s)}Y(["click"]);var et=z('<div class="item svelte-1hxzm7h"><!></div>'),tt=z('<!> <div class="item svelte-1hxzm7h"><button class="add-folder svelte-1hxzm7h"><!></button></div>',1),rt=z('<div class="full-width-item svelte-1hxzm7h"><button class="add-folder svelte-1hxzm7h"><!></button></div>'),at=z('<div class="full-width-item svelte-1hxzm7h"><!></div>'),ot=z('<p> <button class="close-page-button">‚ùå</button></p>'),st=z('<p> <button class="close-page-button">‚ùå</button></p>'),it=z('<div class="page-container svelte-1hxzm7h"><header class="svelte-1hxzm7h"><!> <p> </p> <!></header> <main class="svelte-1hxzm7h"><div class="grid svelte-1hxzm7h"><!> <!> <div class="full-width-item svelte-1hxzm7h"><button class="add-page svelte-1hxzm7h"><!></button></div></div></main> <footer class="svelte-1hxzm7h"><a><!></a> <!> <section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer></div>');function Ft(r,e){ie(e,!0),Ie();const a=Ue();qe();const t=de();let l=Q(()=>Object.keys(a).filter(d=>t.currentFolder.pages&&t.currentFolder.pages.includes(d)));function i(){const d=crypto.randomUUID().slice(0,8),h={title:"Untitled",content:"",lastUpdated:Date.now()};return a[d]=h,d}var s=it(),_=u(s),f=u(_),n=Q(()=>t.currentPath.length<=1);H(f,{variant:"alt",onclick:()=>{t.currentPath.length>1&&t.currentPath.pop()},get disabled(){return g(n)},children:(d,h)=>{re();var p=te("üîô");$(d,p)},$$slots:{default:!0}});var o=k(f,2),P=u(o);v(o);var b=k(o,2);Ze(b,{get color(){return t.currentFolder.color},set color(d){t.currentFolder.color=d}}),v(_);var y=k(_,2),c=u(y),m=u(c);ce(m,()=>t.currentFolder.subfolders,d=>{var h=tt(),p=ze(h);M(p,17,()=>t.currentFolder.subfolders,O,(_e,ee)=>{var G=et(),me=u(G);Te(me,{get folder(){return t.folders[g(ee)]},onclick:()=>t.currentPath.push(g(ee))}),v(G),$(_e,G)});var w=k(p,2),S=u(w);S.__click=()=>t.addSubfolder();var fe=u(S);J(fe,{url:`${I??""}/images/icons/plus.svg`,color:"var(--bg)"}),v(S),v(w),$(d,h)},d=>{var h=rt(),p=u(h);p.__click=()=>t.addSubfolder();var w=u(p);J(w,{url:`${I??""}/images/icons/plus.svg`,color:"var(--bg)"}),v(p),v(h),$(d,h)});var F=k(m,2);M(F,17,()=>g(l),O,(d,h)=>{var p=at(),w=u(p);We(w,{get page(){return a[g(h)]},onclick:()=>Se(I+"/"+g(h)+"/")}),v(p),$(d,p)});var x=k(F,2),C=u(x);C.__click=()=>{const d=i();t.addPageID(d)};var D=u(C);J(D,{url:`${I??""}/images/icons/plus.svg`,color:"var(--bg)"}),v(C),v(x),v(c),v(y);var R=k(y,2),T=u(R);K(T,"href",`${I??""}/profile`);var L=u(T);H(L,{iconURL:`${I??""}/images/icons/gear.svg`}),v(T);var N=k(T,2),U=Q(()=>t.currentPath.length<=1);H(N,{variant:"error",iconURL:`${I??""}/images/icons/xmark-small.svg`,get disabled(){return g(U)},onclick:()=>{if(t.currentPath.length>1){const d=t.currentPath.pop();d&&t.removeSubfolder(d)}},children:(d,h)=>{re();var p=te("Delete Folder");$(d,p)},$$slots:{default:!0}});var W=k(N,2),ue=k(u(W),2);M(ue,17,()=>t.orphanedFolders,O,(d,h)=>{var p=ot(),w=u(p),S=k(w);S.__click=()=>{delete t.folders[g(h)]},v(p),q(()=>A(w,`üíÄüìÅ ${t.folders[g(h)].name??""}`)),$(d,p)}),v(W);var Z=k(W,2),pe=k(u(Z),2);M(pe,17,()=>t.orphanedPages,O,(d,h)=>{var p=st(),w=u(p),S=k(w);S.__click=()=>{delete a[g(h)]},v(p),q(()=>A(w,`üíÄüìÑ ${a[g(h)].title??""}`)),$(d,p)}),v(Z),v(R),v(s),q(()=>{K(s,"style",`background-color: ${t.currentFolder.color??""};`),A(P,t.currentFolder.name)}),$(r,s),le()}Y(["click"]);export{Ft as component};
