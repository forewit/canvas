import{a as U,t as Y,c as de}from"../chunks/disclose-version.D8fhPq9M.js";import{l as pe,b as be,a3 as se,h as M,p as q,r as ge,D as he,W as ie,t as me,v as $,o as B,c as G,w as ce,a as ue,x as xe,a4 as ke,B as Ee,L as j,a5 as J,i as ee,a6 as K,a7 as Ie,a8 as De,I as te,a9 as Ae,V as Ce,aa as Te,d as we,q as Se,Q as Ne,ab as Pe,n as Re,Y as ye,a2 as ae,ac as re,Z as Fe,ad as y,ae as d,af as P,f as S,j as ne}from"../chunks/runtime.D_LhCXyF.js";import{s as le}from"../chunks/render.5xUcu9hh.js";import{i as He}from"../chunks/if.f1rSyLTD.js";import{r as Q}from"../chunks/attributes.CdCRXyt-.js";import{d as Le}from"../chunks/events.BJH2iLDa.js";import{b as W}from"../chunks/input.DHwiiGD3.js";import{g as ve,b as _e}from"../chunks/entry.DBU9UXPQ.js";import{a as Me,g as Oe}from"../chunks/app.svelte.DnnDf6HZ.js";import{g as Ue}from"../chunks/pages.svelte.C5XGaOTi.js";import{g as Ge}from"../chunks/directories.svelte.CjhXhOqs.js";let X=null;function Z(n,e){return e}function Ve(n,e,t,s){for(var v=[],l=e.length,c=0;c<l;c++)Ae(e[c].e,v,!0);var A=l>0&&v.length===0&&t!==null;if(A){var m=t.parentNode;Ce(m),m.append(t),s.clear(),H(n,e[0].prev,e[l-1].next)}Te(v,()=>{for(var p=0;p<l;p++){var _=e[p];A||(s.delete(_.k),H(n,_.prev,_.next)),we(_.e,!A)}})}function z(n,e,t,s,v,l=null){var c=n,A={flags:e,items:new Map,first:null},m=(e&se)!==0;if(m){var p=n;c=M?q(Se(p)):p.appendChild(pe())}M&&ge();var _=null;be(()=>{var r=t(),b=he(r)?r:r==null?[]:ie(r),o=b.length;let u=!1;if(M){var x=c.data===me;x!==(o===0)&&(c=$(),q(c),B(!1),u=!0)}if(M){for(var k=null,C,E=0;E<o;E++){if(G.nodeType===8&&G.data===Ne){c=G,u=!0,B(!1);break}var a=b[E],i=s(a,E);C=fe(G,A,k,null,a,i,E,v,e),A.items.set(i,C),k=C}o>0&&q($())}M||Ye(b,A,c,v,e,s),l!==null&&(o===0?_?ce(_):_=ue(()=>l(c)):_!==null&&xe(_,()=>{_=null})),u&&B(!0)}),M&&(c=G)}function Ye(n,e,t,s,v,l){var D,T,R,F;var c=(v&Pe)!==0,A=(v&(J|K))!==0,m=n.length,p=e.items,_=e.first,r=_,b,o=null,u,x=[],k=[],C,E,a,i;if(c)for(i=0;i<m;i+=1)C=n[i],E=l(C,i),a=p.get(E),a!==void 0&&((D=a.a)==null||D.measure(),(u??(u=new Set)).add(a));for(i=0;i<m;i+=1){if(C=n[i],E=l(C,i),a=p.get(E),a===void 0){var O=r?r.e.nodes_start:t;o=fe(O,e,o,o===null?e.first:o.next,C,E,i,s,v),p.set(E,o),x=[],k=[],r=o.next;continue}if(A&&qe(a,C,i,v),a.e.f&ke&&(ce(a.e),c&&((T=a.a)==null||T.unfix(),(u??(u=new Set)).delete(a))),a!==r){if(b!==void 0&&b.has(a)){if(x.length<k.length){var L=k[0],N;o=L.prev;var g=x[0],f=x[x.length-1];for(N=0;N<x.length;N+=1)oe(x[N],L,t);for(N=0;N<k.length;N+=1)b.delete(k[N]);H(e,g.prev,f.next),H(e,o,g),H(e,f,L),r=L,o=f,i-=1,x=[],k=[]}else b.delete(a),oe(a,r,t),H(e,a.prev,a.next),H(e,a,o===null?e.first:o.next),H(e,o,a),o=a;continue}for(x=[],k=[];r!==null&&r.k!==E;)(b??(b=new Set)).add(r),k.push(r),r=r.next;if(r===null)continue;a=r}x.push(a),o=a,r=a.next}if(r!==null||b!==void 0){for(var h=b===void 0?[]:ie(b);r!==null;)h.push(r),r=r.next;var w=h.length;if(w>0){var I=v&se&&m===0?t:null;if(c){for(i=0;i<w;i+=1)(R=h[i].a)==null||R.measure();for(i=0;i<w;i+=1)(F=h[i].a)==null||F.fix()}Ve(e,h,I,p)}}c&&Ee(()=>{var V;if(u!==void 0)for(a of u)(V=a.a)==null||V.apply()}),j.first=e.first&&e.first.e,j.last=o&&o.e}function qe(n,e,t,s){s&J&&ee(n.v,e),s&K?ee(n.i,t):n.i=t}function fe(n,e,t,s,v,l,c,A,m){var p=X;try{var _=(m&J)!==0,r=(m&Ie)===0,b=_?r?De(v):te(v):v,o=m&K?te(c):c,u={i:o,v:b,k:l,a:null,e:null,prev:t,next:s};return X=u,u.e=ue(()=>A(n,b,o),M),u.e.prev=t&&t.e,u.e.next=s&&s.e,t===null?e.first=u:(t.next=u,t.e.next=u.e),s!==null&&(s.prev=u,s.e.prev=u.e),u}finally{X=p}}function oe(n,e,t){for(var s=n.next?n.next.e.nodes_start:t,v=e?e.e.nodes_start:t,l=n.e.nodes_start;l!==s;){var c=Re(l);v.before(l),l=c}}function H(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}var Be=(n,e)=>{e.logout()},Qe=(n,e)=>{e.addSubfolder()},We=(n,e)=>{e.goto(e.currentPath.slice(0,-1))},Xe=(n,e,t)=>{e.currentPath.push(S(t).title)},Ze=(n,e,t)=>e.removeSubfolder(S(t).title),ze=Y('<div class="folder svelte-16cublx"><p>📁</p> <input type="text"> <button class="goto-folder-button svelte-16cublx">Go</button> <button class="close-folder-button svelte-16cublx">❌</button></div>'),Je=(n,e)=>ve(_e+"/"+e()+"/"),Ke=Y('<div class="page svelte-16cublx"><p>📄</p> <input type="text"> <button class="goto-page-button svelte-16cublx">Go</button> <button class="close-page-button svelte-16cublx">❌</button></div>'),$e=(n,e)=>ve(_e+"/"+e()+"/"),je=Y('<div class="page svelte-16cublx"><p>📄</p> <input type="text"> <button class="goto-page-button svelte-16cublx">Go</button> <button class="close-page-button svelte-16cublx">❌</button></div>'),et=Y('<header class="svelte-16cublx"><button class="logout-button svelte-16cublx">Logout</button> <button class="spellcheck-button svelte-16cublx"> </button> <button class="new-page-button svelte-16cublx">+📄</button> <button class="new-folder-button svelte-16cublx">+📁</button></header> <main><section id="path"><button class="directory-back-button svelte-16cublx">🔙</button> </section> <section id="folders"><!></section> <section id="pages"></section> <section id="remaining-pages"><p>Remaining pages:</p> <!></section></main>',1);function _t(n,e){ye(e,!0);const t=Me(),s=Ue(),v=Oe(),l=Ge();l.currentFolder.subfolders;let c=ne(()=>l.currentFolder.ids?l.currentFolder.ids.map(g=>({id:g,page:s[g]})):[]),A=ne(()=>{let g=[];for(let f in s)S(c).some(h=>h.id===f)||g.push({id:f,page:s[f]});return g});var m=et(),p=ae(m),_=y(p);_.__click=[Be,v];var r=d(_,2);r.__click=()=>{t.spellcheck=!t.spellcheck};var b=y(r);P(r);var o=d(r,2);o.__click=()=>{const g=crypto.randomUUID().slice(0,8),f={title:"New Page",content:"",lastUpdated:Date.now()};s[g]=f,l.addPageID(g)};var u=d(o,2);u.__click=[Qe,l],P(p);var x=d(p,2),k=y(x),C=y(k);C.__click=[We,l];var E=d(C);re(()=>le(E,` Root/${l.currentPath.join("/")??""}`)),P(k);var a=d(k,2),i=y(a);He(i,()=>l.currentFolder.subfolders,g=>{var f=de(),h=ae(f);z(h,17,()=>l.currentFolder.subfolders,Z,(w,I)=>{var D=ze(),T=d(y(D),2);Q(T);var R=d(T,2);R.__click=[Xe,l,I];var F=d(R,2);F.__click=[Ze,l,I],P(D),W(T,()=>S(I).title,V=>S(I).title=V),U(w,D)}),U(g,f)}),P(a);var O=d(a,2);z(O,21,()=>S(c),Z,(g,f)=>{let h=()=>S(f).id,w=()=>S(f).page;var I=Ke(),D=d(y(I),2);Q(D);var T=d(D,2);T.__click=[Je,h];var R=d(T,2);R.__click=()=>{l.removeDocID(h()),delete s[h()]},P(I),W(D,()=>w().title,F=>w().title=F),U(g,I)}),P(O);var L=d(O,2),N=d(y(L),2);z(N,17,()=>S(A),Z,(g,f)=>{let h=()=>S(f).id,w=()=>S(f).page;var I=je(),D=d(y(I),2);Q(D);var T=d(D,2);T.__click=[$e,h];var R=d(T,2);R.__click=()=>{l.removeDocID(h()),delete s[h()]},P(I),W(D,()=>w().title,F=>w().title=F),U(g,I)}),P(L),P(x),re(()=>le(b,`Spellcheck: ${t.spellcheck??""}`)),U(n,m),Fe()}Le(["click"]);export{_t as component};
