import{a as p,t as _,c as E,d as ae}from"../chunks/disclose-version.BRFWJlgu.js";import{K as J,O as s,R as n,ap as b,M as N,ag as L,k as c,n as G,Q as H,P as o}from"../chunks/runtime.De9YyAkO.js";import{s as k}from"../chunks/render.DNGc7hJe.js";import{i as O}from"../chunks/if.DxqyGXBG.js";import{e as g,i as m,F as oe}from"../chunks/Folder.C3LHlU7T.js";import{s as se}from"../chunks/attributes.N1z6uQRr.js";import{d as V}from"../chunks/events.-h2mbIF3.js";import{g as ne}from"../chunks/entry.Csx4qG8w.js";import{b as v}from"../chunks/paths.DBDZQgiF.js";import{g as ce}from"../chunks/app.svelte.omhvH3X-.js";import{g as le}from"../chunks/pages.svelte.BplmUK_0.js";import{g as ie}from"../chunks/firebase.svelte.DK2MtVdp.js";import{g as de}from"../chunks/directories.svelte.Cil8smhP.js";import{B as f,T as pe}from"../chunks/TextInput.BSjsX2Rn.js";var ve=_('<button class="page svelte-1kkcr3s"> </button>');function fe(P,u){J(u,!0);var l=ve();l.__click=function(...x){var h;(h=u.onclick)==null||h.apply(this,x)};var e=s(l);n(l),b(()=>k(e,u.page.title)),p(P,l),N()}V(["click"]);var ue=_("<p>/</p> <!>",1),ge=_('<p> <button class="close-page-button">‚ùå</button></p>'),me=_('<p> <button class="close-page-button">‚ùå</button></p>'),_e=_('<header class="svelte-znfz8c"><div class="path svelte-znfz8c"><!> <!> <!></div> <a class="profile"><!></a></header> <main class="svelte-znfz8c"><section id="folders" class="svelte-znfz8c"><!> <div id="add-folder" class="svelte-znfz8c"><!></div></section> <section id="pages" class="svelte-znfz8c"><!> <div id="add-page" class="svelte-znfz8c"><!></div></section></main> <footer class="svelte-znfz8c"><section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer>',1);function Ie(P,u){J(u,!0),ce();const l=le();ie();const e=de();let x=G(()=>Object.keys(l).filter(r=>e.currentFolder.pages&&e.currentFolder.pages.includes(r)));function h(){const r=crypto.randomUUID().slice(0,8),t={title:"Untitled",content:"",lastUpdated:Date.now()};return l[r]=t,r}var I=_e(),z=L(I),$=s(z),B=s($),W=G(()=>e.currentPath.length<=1);f(B,{variant:"alt",onclick:()=>{e.currentPath.length>1&&e.currentPath.pop()},get disabled(){return c(W)},children:(r,t)=>{H();var a=E("üîô");p(r,a)},$$slots:{default:!0}});var S=o(B,2);g(S,17,()=>e.currentPath,m,(r,t,a)=>{var i=ue(),d=o(L(i),2);O(d,()=>a===e.currentPath.length-1,C=>{pe(C,{get value(){return e.folders[c(t)].name},set value(D){e.folders[c(t)].name=D},placeholder:"Untitled"})},C=>{f(C,{variant:"alt",onclick:()=>e.currentPath=e.currentPath.slice(0,a+1),children:(D,he)=>{H();var q=E();b(()=>k(q,e.folders[c(t)].name)),p(D,q)},$$slots:{default:!0}})}),p(r,i)});var X=o(S,2);O(X,()=>e.currentPath.length>1,r=>{f(r,{variant:"error",iconURL:`${v??""}/images/icons/xmark-small.svg`,onclick:()=>{const t=e.currentPath.pop();t&&e.removeSubfolder(t)}})}),n($);var F=o($,2);se(F,"href",`${v??""}/profile`);var Y=s(F);f(Y,{variant:"alt",iconURL:`${v??""}/images/icons/gear.svg`}),n(F),n(z);var U=o(z,2),y=s(U),T=s(y);O(T,()=>e.currentFolder.subfolders,r=>{var t=ae(),a=L(t);g(a,17,()=>e.currentFolder.subfolders,m,(i,d)=>{oe(i,{get folder(){return e.folders[c(d)]},onclick:()=>e.currentPath.push(c(d))})}),p(r,t)});var j=o(T,2),Z=s(j);f(Z,{iconURL:`${v??""}/images/icons/plus.svg`,onclick:()=>e.addSubfolder()}),n(j),n(y);var w=o(y,2),A=s(w);g(A,17,()=>c(x),m,(r,t)=>{fe(r,{get page(){return l[c(t)]},onclick:()=>ne(v+"/"+c(t)+"/")})});var K=o(A,2),ee=s(K);f(ee,{iconURL:`${v??""}/images/icons/plus.svg`,onclick:()=>{const r=h();e.addPageID(r)}}),n(K),n(w),n(U);var M=o(U,2),R=s(M),te=o(s(R),2);g(te,17,()=>e.orphanedFolders,m,(r,t)=>{var a=ge(),i=s(a),d=o(i);d.__click=()=>{delete e.folders[c(t)]},n(a),b(()=>k(i,`üíÄüìÅ ${e.folders[c(t)].name??""}`)),p(r,a)}),n(R);var Q=o(R,2),re=o(s(Q),2);g(re,17,()=>e.orphanedPages,m,(r,t)=>{var a=me(),i=s(a),d=o(i);d.__click=()=>{delete l[c(t)]},n(a),b(()=>k(i,`üíÄüìÑ ${l[c(t)].title??""}`)),p(r,a)}),n(Q),n(M),p(P,I),N()}V(["click"]);export{Ie as component};
