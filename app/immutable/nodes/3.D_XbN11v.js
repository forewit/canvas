import{h as g,z as T,y as D,c,v as R,w as o,t as h,x as q}from"../chunks/disclose-version.BH-PvlUQ.js";import{N as F,O as G,P as I,r as x,A as M,v as E,h as i,f as u,s as m}from"../chunks/runtime.CoKbEUpK.js";import{P as V,g as W}from"../chunks/ProgressBar.k83v1ne2.js";import{b as Y,g as j}from"../chunks/entry.CAgOreiK.js";import{e as C}from"../chunks/events.BqAoXrdc.js";import{i as b}from"../chunks/index-client.haWAh2QJ.js";import{a as H}from"../chunks/authUtils.B0SqaCfP.js";import{f as w}from"../chunks/firebaseState.svelte.Ctph1LkB.js";let A=!1;function O(){A||(A=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const s of e.target.elements)(r=s.__on_r)==null||r.call(s)})},{capture:!0}))}function L(e){if(g){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var t=e.value;k(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var a=e.checked;k(e,"checked",null),e.checked=a}}};e.__on_r=s,F(s),O()}}function k(e,r,s,t){s=s==null?null:s+"";var a=e.__attributes??(e.__attributes={});g&&(a[r]=e.getAttribute(r),r==="src"||r==="href"||r==="srcset")||a[r]!==(a[r]=s)&&(r==="loading"&&(e[G]=s),s===null?e.removeAttribute(r):e.setAttribute(r,s))}function J(e,r,s,t=s){e.addEventListener(r,s);const a=e.__on_r;a?e.__on_r=()=>{a(),t()}:e.__on_r=t,O()}function S(e,r,s){J(e,"input",()=>{s(z(e)?P(e.value):e.value)}),I(()=>{var t=r();if(g&&e.defaultValue!==e.value){s(e.value);return}z(e)&&t===P(e.value)||e.type==="date"&&!t&&!e.value||(e.value=t??"")})}function z(e){var r=e.type;return r==="number"||r==="range"}function P(e){return e===""?null:+e}var K=h('<b class="error svelte-lz3ywn">Wrong password!</b>'),Q=h('<form class="form svelte-lz3ywn"><input class="email svelte-lz3ywn" type="email" placeholder="Email" required> <input class="password svelte-lz3ywn" type="password" placeholder="Password" required> <!> <input type="submit" value="Login" class="btn svelte-lz3ywn"></form>');function U(e,r){x(r,!0);let s=m(""),t=m(""),a=m(!1);async function _(){try{u(a,!1),await H(i(s),i(t)),r.onSuccessfulLogin()}catch{console.log("Login failed!"),u(a,!0)}}M(()=>{w.user&&r.onSuccessfulLogin()});var p=T(),B=D(p);b(B,()=>w.user,l=>{V(l)},l=>{var f=Q(),d=R(f);L(d);var v=o(o(d,!0));L(v);var y=o(o(v,!0));b(y,()=>i(a),n=>{var N=K();c(n,N)}),o(o(y,!0)),q(f),C("submit",f,_),S(d,()=>i(s),n=>u(s,n)),S(v,()=>i(t),n=>u(t,n)),c(l,f)}),c(e,p),E()}var X=h('<div class="form-container svelte-swxtik"><!></div>');function ne(e,r){x(r,!0);const s=W();function t(){s.authRedirect===`${Y}/login/`&&(s.authRedirect="/"),j(s.authRedirect)}var a=X(),_=R(a);U(_,{onSuccessfulLogin:t}),q(a),c(e,a),E()}export{ne as component};
