import{t as _,a as d,b as h,c as ee}from"../chunks/disclose-version.CUhFZy4l.js";import{O as te,P as R,b as s,Q as ae,R as l,T as o,d as Q,V as f,W as i,X as y}from"../chunks/runtime.Cnk7LXRW.js";import{s as L}from"../chunks/render.Bm-kpM2v.js";import{i as re}from"../chunks/if.BZo9BrAY.js";import{B as p,e as $,i as b,T as V}from"../chunks/TextInput.CMaZELae.js";import{s as oe}from"../chunks/attributes.BBlWWJlT.js";import{d as se}from"../chunks/events.D932GjPL.js";import{g as ne}from"../chunks/entry.BLBqkRNH.js";import{b as P}from"../chunks/paths.Cjuv-4Q-.js";import{g as le}from"../chunks/app.svelte.DGoy9CJd.js";import{g as ie}from"../chunks/pages.svelte.CgSavqKs.js";import{g as ve}from"../chunks/firebase.svelte.D1U9I8Ju.js";import{g as de}from"../chunks/directories.svelte.DTfGe2dT.js";var ce=h("<p>/</p> <!>",1),pe=h('<div class="item svelte-dvg98s"><!> <!> <!></div>'),ue=h('<div class="item svelte-dvg98s"><!> <!> <!></div>'),ge=h('<div class="page"><p> </p> <button class="close-page-button">‚ùå</button></div>'),me=h('<div class="page"><p> </p> <button class="close-page-button">‚ùå</button></div>'),_e=h('<header class="svelte-dvg98s"><div class="path svelte-dvg98s"><!> <!></div> <a class="profile"><!></a></header> <main class="svelte-dvg98s"><section class="items svelte-dvg98s"><!> <!></section> <section class="buttons svelte-dvg98s"><!> <!></section></main> <footer class="svelte-dvg98s"><section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer>',1);function ye(W,X){te(X,!0),le();const u=ie();ve();const e=de();let q=Q(()=>Object.keys(u).filter(t=>e.currentFolder.pages&&e.currentFolder.pages.includes(t)));function z(){const t=crypto.randomUUID().slice(0,8),a={title:"New Page",content:"",lastUpdated:Date.now()};return u[t]=a,t}var T=_e(),x=R(T),k=l(x),w=l(k),E=Q(()=>e.currentPath.length<=1);p(w,{variant:"alt",onclick:()=>{e.currentPath.length>1&&e.currentPath.pop()},get disabled(){return s(E)},children:(t,a)=>{f();var r=_("üîô");d(t,r)},$$slots:{default:!0}});var G=o(w,2);$(G,17,()=>e.currentPath,b,(t,a,r)=>{var n=ce(),v=o(R(n),2);p(v,{variant:"alt",onclick:()=>e.currentPath=e.currentPath.slice(0,r+1),children:(c,g)=>{f();var m=_();y(()=>L(m,e.folders[s(a)].name)),d(c,m)},$$slots:{default:!0}}),d(t,n)}),i(k);var F=o(k,2);oe(F,"href",`${P??""}/profile`);var H=l(F);p(H,{variant:"alt",iconURL:`${P??""}/images/icons/gear.svg`}),i(F),i(x);var U=o(x,2),D=l(U),B=l(D);re(B,()=>e.currentFolder.subfolders,t=>{var a=ee(),r=R(a);$(r,17,()=>e.currentFolder.subfolders,b,(n,v)=>{var c=pe(),g=l(c);p(g,{variant:"alt",onclick:()=>e.currentPath.push(s(v)),children:(O,fe)=>{f();var Z=_("üìÇ");d(O,Z)},$$slots:{default:!0}});var m=o(g,2);V(m,{variant:"alt",get value(){return e.folders[s(v)].name},set value(O){e.folders[s(v)].name=O}});var I=o(m,2);p(I,{variant:"alt",iconURL:`${P??""}/images/icons/xmark-small.svg`,onclick:()=>e.removeSubfolder(s(v))}),i(c),d(n,c)}),d(t,a)});var J=o(B,2);$(J,17,()=>s(q),b,(t,a)=>{var r=ue(),n=l(r);p(n,{variant:"alt",onclick:()=>ne(P+"/"+s(a)+"/"),children:(g,m)=>{f();var I=_("üìÑ");d(g,I)},$$slots:{default:!0}});var v=o(n,2);V(v,{variant:"alt",get value(){return u[s(a)].title},set value(g){u[s(a)].title=g}});var c=o(v,2);p(c,{variant:"alt",iconURL:`${P??""}/images/icons/xmark-small.svg`,onclick:()=>{e.removePageID(s(a)),delete u[s(a)]}}),i(r),d(t,r)}),i(D);var S=o(D,2),j=l(S);p(j,{onclick:()=>e.addSubfolder(),children:(t,a)=>{f();var r=_("+üìÇ");d(t,r)},$$slots:{default:!0}});var K=o(j,2);p(K,{onclick:()=>{const t=z();e.addPageID(t)},children:(t,a)=>{f();var r=_("+üìÑ");d(t,r)},$$slots:{default:!0}}),i(S),i(U);var A=o(U,2),C=l(A),M=o(l(C),2);$(M,17,()=>e.orphanedFolders,b,(t,a)=>{var r=ge(),n=l(r),v=l(n);i(n);var c=o(n,2);c.__click=()=>{delete e.folders[s(a)]},i(r),y(()=>L(v,`üíÄüìÅ ${e.folders[s(a)].name??""}`)),d(t,r)}),i(C);var N=o(C,2),Y=o(l(N),2);$(Y,17,()=>e.orphanedPages,b,(t,a)=>{var r=me(),n=l(r),v=l(n);i(n);var c=o(n,2);c.__click=()=>{delete u[s(a)]},i(r),y(()=>L(v,`üíÄüìÑ ${u[s(a)].title??""}`)),d(t,r)}),i(N),i(A),d(W,T),ae()}se(["click"]);export{ye as component};
