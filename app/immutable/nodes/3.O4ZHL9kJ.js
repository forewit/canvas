import{h as p,n as b,f as u,t as L,p as h,u as C,q as F,o}from"../chunks/disclose-version.CoLRWgS4.js";import{C as G,L as I,D as M,w as E,F as N,x as B,j as n,s as m,g as f}from"../chunks/runtime.CLZrHKHI.js";import{f as w,a as g}from"../chunks/appState.svelte.B78BBxjm.js";import{b as V,g as W}from"../chunks/entry.Ko5tWxkR.js";import{e as Y}from"../chunks/events.C6iyALSH.js";import{i as x}from"../chunks/if.fMkSvUVr.js";import{a as H}from"../chunks/authUtils.d2Yma2W3.js";let A=!1;function D(){A||(A=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const s of e.target.elements)(r=s.__on_r)==null||r.call(s)})},{capture:!0}))}function S(e){if(p){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;z(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var t=e.checked;z(e,"checked",null),e.checked=t}}};e.__on_r=s,G(s),D()}}function z(e,r,s,a){s=s==null?null:s+"";var t=e.__attributes??(e.__attributes={});p&&(t[r]=e.getAttribute(r),r==="src"||r==="href"||r==="srcset")||t[r]!==(t[r]=s)&&(r==="loading"&&(e[I]=s),s===null?e.removeAttribute(r):e.setAttribute(r,s))}function J(e,r,s,a=s){e.addEventListener(r,s);const t=e.__on_r;t?e.__on_r=()=>{t(),a()}:e.__on_r=a,D()}function q(e,r,s){J(e,"input",()=>{s(P(e)?R(e.value):e.value)}),M(()=>{var a=r();if(p&&e.defaultValue!==e.value){s(e.value);return}P(e)&&a===R(e.value)||e.type==="date"&&!a&&!e.value||(e.value=a??"")})}function P(e){var r=e.type;return r==="number"||r==="range"}function R(e){return e===""?null:+e}var K=L('<div class="progress-bar svelte-1u2nbnk"><div class="progress-bar-value svelte-1u2nbnk"></div></div>');function Q(e){var r=K();b(r),h(r),u(e,r)}var U=L('<b class="error svelte-dzxb86">Wrong password!</b>'),X=L('<div class="form-container svelte-dzxb86"><form class="form svelte-dzxb86"><input class="email svelte-dzxb86" type="email" placeholder="Email" required> <input class="password svelte-dzxb86" type="password" placeholder="Password" required> <!> <input type="submit" value="Login" class="btn svelte-dzxb86"></form></div>');function Z(e,r){E(r,!0);let s=m(""),a=m(""),t=m(!1);async function O(){try{f(t,!1),await H(n(s),n(a)),r.onSuccessfulLogin()}catch{console.log("Login failed!"),f(t,!0)}}N(()=>{w.user&&r.onSuccessfulLogin()});var k=C(),T=F(k);x(T,()=>w.user,l=>{Q(l)},l=>{var c=X(),d=b(c),v=b(d);S(v);var _=o(o(v,!0));S(_);var y=o(o(_,!0));x(y,()=>n(t),i=>{var j=U();u(i,j)}),o(o(y,!0)),h(d),h(c),Y("submit",d,O),q(v,()=>n(s),i=>f(s,i)),q(_,()=>n(a),i=>f(a,i)),u(l,c)}),u(e,k),B()}function ie(e,r){E(r,!0);function s(){g.authRedirect===`${V}/login/`&&(g.authRedirect="/"),W(g.authRedirect)}Z(e,{onSuccessfulLogin:s}),B()}export{ie as component};
