import{a as H,t as R,c as fe}from"../chunks/disclose-version.D8fhPq9M.js";import{l as _e,b as pe,a3 as se,h as O,p as Q,r as be,D as he,W as oe,t as me,v as K,o as W,c as V,w as ce,a as ie,x as ge,a4 as ke,B as ye,L as ee,a5 as z,i as te,a6 as J,a7 as xe,a8 as Ee,I as ae,a9 as Ie,V as je,aa as Ae,d as Ce,q as Pe,Q as Te,ab as we,n as De,Y as Se,a2 as X,ac as B,Z as Ne,ad as A,ae as p,af as I,f as C,j as Fe}from"../chunks/runtime.D_LhCXyF.js";import{s as G}from"../chunks/render.5xUcu9hh.js";import{i as He}from"../chunks/if.f1rSyLTD.js";import{r as re}from"../chunks/attributes.CdCRXyt-.js";import{d as Oe}from"../chunks/events.BJH2iLDa.js";import{b as ne}from"../chunks/input.DHwiiGD3.js";import{g as Re,b as Le}from"../chunks/entry.DzZATzI1.js";import{a as Me,g as Ue}from"../chunks/app.svelte.DnnDf6HZ.js";import{g as Ve}from"../chunks/pages.svelte.C5XGaOTi.js";import{g as Ye}from"../chunks/directories.svelte.xjE4BcSv.js";let Z=null;function Y(o,e){return e}function $e(o,e,a,l){for(var d=[],t=e.length,i=0;i<t;i++)Ie(e[i].e,d,!0);var P=t>0&&d.length===0&&a!==null;if(P){var y=a.parentNode;je(y),y.append(a),l.clear(),F(o,e[0].prev,e[t-1].next)}Ae(d,()=>{for(var x=0;x<t;x++){var f=e[x];P||(l.delete(f.k),F(o,f.prev,f.next)),Ce(f.e,!P)}})}function $(o,e,a,l,d,t=null){var i=o,P={flags:e,items:new Map,first:null},y=(e&se)!==0;if(y){var x=o;i=O?Q(Pe(x)):x.appendChild(_e())}O&&be();var f=null;pe(()=>{var n=a(),h=he(n)?n:n==null?[]:oe(n),c=h.length;let u=!1;if(O){var E=i.data===me;E!==(c===0)&&(i=K(),Q(i),W(!1),u=!0)}if(O){for(var j=null,w,g=0;g<c;g++){if(V.nodeType===8&&V.data===Te){i=V,u=!0,W(!1);break}var r=h[g],s=l(r,g);w=ue(V,P,j,null,r,s,g,d,e),P.items.set(s,w),j=w}c>0&&Q(K())}O||qe(h,P,i,d,e,l),t!==null&&(c===0?f?ce(f):f=ie(()=>t(i)):f!==null&&ge(f,()=>{f=null})),u&&W(!0)}),O&&(i=V)}function qe(o,e,a,l,d,t){var b,m,T,N;var i=(d&we)!==0,P=(d&(z|J))!==0,y=o.length,x=e.items,f=e.first,n=f,h,c=null,u,E=[],j=[],w,g,r,s;if(i)for(s=0;s<y;s+=1)w=o[s],g=t(w,s),r=x.get(g),r!==void 0&&((b=r.a)==null||b.measure(),(u??(u=new Set)).add(r));for(s=0;s<y;s+=1){if(w=o[s],g=t(w,s),r=x.get(g),r===void 0){var q=n?n.e.nodes_start:a;c=ue(q,e,c,c===null?e.first:c.next,w,g,s,l,d),x.set(g,c),E=[],j=[],n=c.next;continue}if(P&&Be(r,w,s,d),r.e.f&ke&&(ce(r.e),i&&((m=r.a)==null||m.unfix(),(u??(u=new Set)).delete(r))),r!==n){if(h!==void 0&&h.has(r)){if(E.length<j.length){var S=j[0],D;c=S.prev;var L=E[0],M=E[E.length-1];for(D=0;D<E.length;D+=1)le(E[D],S,a);for(D=0;D<j.length;D+=1)h.delete(j[D]);F(e,L.prev,M.next),F(e,c,L),F(e,M,S),n=S,c=M,s-=1,E=[],j=[]}else h.delete(r),le(r,n,a),F(e,r.prev,r.next),F(e,r,c===null?e.first:c.next),F(e,c,r),c=r;continue}for(E=[],j=[];n!==null&&n.k!==g;)(h??(h=new Set)).add(n),j.push(n),n=n.next;if(n===null)continue;r=n}E.push(r),c=r,n=r.next}if(n!==null||h!==void 0){for(var _=h===void 0?[]:oe(h);n!==null;)_.push(n),n=n.next;var v=_.length;if(v>0){var k=d&se&&y===0?a:null;if(i){for(s=0;s<v;s+=1)(T=_[s].a)==null||T.measure();for(s=0;s<v;s+=1)(N=_[s].a)==null||N.fix()}$e(e,_,k,x)}}i&&ye(()=>{var U;if(u!==void 0)for(r of u)(U=r.a)==null||U.apply()}),ee.first=e.first&&e.first.e,ee.last=c&&c.e}function Be(o,e,a,l){l&z&&te(o.v,e),l&J?te(o.i,a):o.i=a}function ue(o,e,a,l,d,t,i,P,y){var x=Z;try{var f=(y&z)!==0,n=(y&xe)===0,h=f?n?Ee(d):ae(d):d,c=y&J?ae(i):i,u={i:c,v:h,k:t,a:null,e:null,prev:a,next:l};return Z=u,u.e=ie(()=>P(o,h,c),O),u.e.prev=a&&a.e,u.e.next=l&&l.e,a===null?e.first=u:(a.next=u,a.e.next=u.e),l!==null&&(l.prev=u,l.e.prev=u.e),u}finally{Z=x}}function le(o,e,a){for(var l=o.next?o.next.e.nodes_start:a,d=e?e.e.nodes_start:a,t=o.e.nodes_start;t!==l;){var i=De(t);d.before(t),t=i}}function F(o,e,a){e===null?o.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var Ge=(o,e)=>{e.logout()},Qe=R('<p>/</p> <button class="svelte-1cjlydm"> </button>',1),We=R('<div class="folder svelte-1cjlydm"><p>📁</p> <input type="text"> <button class="goto-folder-button svelte-1cjlydm">Go</button> <button class="close-folder-button svelte-1cjlydm">❌</button></div>'),Xe=(o,e)=>Re(Le+"/"+C(e)+"/"),Ze=R('<div class="page svelte-1cjlydm"><p>📄</p> <input type="text"> <button class="goto-page-button svelte-1cjlydm">Go</button> <button class="close-page-button svelte-1cjlydm">❌</button></div>'),ze=R('<div class="page svelte-1cjlydm"><p> </p> <button class="close-page-button svelte-1cjlydm">❌</button></div>'),Je=R('<div class="page svelte-1cjlydm"><p> </p> <button class="close-page-button svelte-1cjlydm">❌</button></div>'),Ke=R('<header class="svelte-1cjlydm"><button class="logout-button svelte-1cjlydm">Logout</button> <button class="spellcheck-button svelte-1cjlydm"> </button> <button class="new-page-button svelte-1cjlydm">+📄</button> <button class="new-folder-button svelte-1cjlydm">+📁</button></header> <main><section id="path" class="svelte-1cjlydm"><button class="directory-back-button svelte-1cjlydm">🔙</button> <!></section> <section id="folders"><!></section> <section id="pages"></section></main> <footer class="svelte-1cjlydm"><section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer>',1);function vt(o,e){Se(e,!0);const a=Me(),l=Ve(),d=Ue(),t=Ye();let i=Fe(()=>Object.keys(l).filter(_=>t.currentFolder.pages&&t.currentFolder.pages.includes(_)));var P=Ke(),y=X(P),x=A(y);x.__click=[Ge,d];var f=p(x,2);f.__click=()=>{a.spellcheck=!a.spellcheck};var n=A(f);I(f);var h=p(f,2);h.__click=()=>{const _=crypto.randomUUID().slice(0,8),v={title:"New Page",content:"",lastUpdated:Date.now()};l[_]=v,t.addPageID(_)};var c=p(h,2);c.__click=()=>{t.addSubfolder()},I(y);var u=p(y,2),E=A(u),j=A(E);j.__click=()=>{t.currentPath.length>1&&t.currentPath.pop()};var w=p(j,2);$(w,17,()=>t.currentPath,Y,(_,v,k)=>{var b=Qe(),m=p(X(b),2);m.__click=()=>t.currentPath=t.currentPath.slice(0,k+1);var T=A(m);I(m),B(()=>G(T,t.folders[C(v)].name)),H(_,b)}),I(E);var g=p(E,2),r=A(g);He(r,()=>t.currentFolder.subfolders,_=>{var v=fe(),k=X(v);$(k,17,()=>t.currentFolder.subfolders,Y,(b,m)=>{var T=We(),N=p(A(T),2);re(N);var U=p(N,2);U.__click=()=>{t.currentPath.push(C(m))};var ve=p(U,2);ve.__click=()=>t.removeSubfolder(C(m)),I(T),ne(N,()=>t.folders[C(m)].name,de=>t.folders[C(m)].name=de),H(b,T)}),H(_,v)}),I(g);var s=p(g,2);$(s,21,()=>C(i),Y,(_,v)=>{var k=Ze(),b=p(A(k),2);re(b);var m=p(b,2);m.__click=[Xe,v];var T=p(m,2);T.__click=()=>{t.removePageID(C(v)),delete l[C(v)]},I(k),ne(b,()=>l[C(v)].title,N=>l[C(v)].title=N),H(_,k)}),I(s),I(u);var q=p(u,2),S=A(q),D=p(A(S),2);$(D,17,()=>t.orphanedFolders,Y,(_,v)=>{var k=ze(),b=A(k),m=A(b);I(b);var T=p(b,2);T.__click=()=>{delete t.folders[C(v)]},I(k),B(()=>G(m,`💀📁 ${t.folders[C(v)].name??""}`)),H(_,k)}),I(S);var L=p(S,2),M=p(A(L),2);$(M,17,()=>t.orphanedPages,Y,(_,v)=>{var k=Je(),b=A(k),m=A(b);I(b);var T=p(b,2);T.__click=()=>{delete l[C(v)]},I(k),B(()=>G(m,`💀📄 ${l[C(v)].title??""}`)),H(_,k)}),I(L),I(q),B(()=>{G(n,`Spellcheck: ${a.spellcheck??""}`),j.disabled=t.currentPath.length<=1}),H(o,P),Ne()}Oe(["click"]);export{vt as component};
