import{h as R,c as ft,d as ht,r as et,b as at,s as U,a as L,i as dt,E as M,v as Q,w as V,l as bt,x as gt,y as mt,z as kt,q as rt,n as T,u as s,f as O,t as Y,o as I,p as Et}from"../chunks/disclose-version.D25B7Gj1.js";import{b as St,i as xt,r as ct,a as vt,p as yt,K as zt,q as At,m as nt,c as st,I as Tt,s as lt,M as It,N as wt,d as Nt,h as Ct,S as Dt,j as Ot,y as Rt,J as q,z as Ht,O as w}from"../chunks/runtime.DQzYxgOy.js";import{s as ot}from"../chunks/render.DY8h8vBE.js";import{i as Lt}from"../chunks/if.DXSm7w67.js";import{r as B}from"../chunks/attributes.BIGlJQtS.js";import{d as Mt}from"../chunks/events.DMcSJaRG.js";import{b as $}from"../chunks/input.WhFY7VDn.js";import{o as Yt,p as F,u as J}from"../chunks/pagesState.svelte.l_q5DSsV.js";import{l as Ut}from"../chunks/authUtils.Bop8eAqs.js";import{g as qt,b as Bt}from"../chunks/entry.idQE7p2S.js";import{a as z}from"../chunks/appState.svelte.7EbcOfI7.js";let G=null;function K(l,t){return t}function $t(l,t,e,u){for(var p=[],v=t.length,i=0;i<v;i++)It(t[i].e,p,!0);var S=v>0&&p.length===0&&e!==null;if(S){var h=e.parentNode;bt(h),h.append(e),u.clear(),C(l,t[0].prev,t[v-1].next)}wt(p,()=>{for(var m=0;m<v;m++){var g=t[m];S||(u.delete(g.k),C(l,g.prev,g.next)),Nt(g.e,!S)}})}function P(l,t,e,u,p,v=null){var i=l,S={flags:t,items:new Map,first:null};R&&ft();var h=null;St(()=>{var m=e(),g=xt(m)?m:m==null?[]:Array.from(m),n=g.length,d=S.flags;d&V&&!Ct(g)&&!(Dt in g)&&!(Ot in g)&&(d^=V,d&mt&&!(d&M)&&(d^=M));let o=!1;if(R){var b=i.data===ht;b!==(n===0)&&(i=et(),at(i),U(!1),o=!0)}if(R){for(var k=null,y,_=0;_<n;_++){if(L.nodeType===8&&L.data===dt){i=L,o=!0,U(!1);break}var c=g[_],a=u(c,_);y=pt(L,S,k,null,c,a,_,p,d),S.items.set(a,y),k=y}n>0&&at(et())}R||Gt(g,S,i,p,d,u),v!==null&&(n===0?h?ct(h):h=vt(()=>v(i)):h!==null&&yt(h,()=>{h=null})),o&&U(!0)}),R&&(i=L)}function Gt(l,t,e,u,p,v){var X,Z,W,j;var i=(p&gt)!==0,S=(p&(M|Q))!==0,h=l.length,m=t.items,g=t.first,n=g,d=new Set,o=null,b=new Set,k=[],y=[],_,c,a,r;if(i)for(r=0;r<h;r+=1)_=l[r],c=v(_,r),a=m.get(c),a!==void 0&&((X=a.a)==null||X.measure(),b.add(a));for(r=0;r<h;r+=1){if(_=l[r],c=v(_,r),a=m.get(c),a===void 0){var N=n?n.e.nodes.start:e;o=pt(N,t,o,o===null?t.first:o.next,_,c,r,u,p),m.set(c,o),k=[],y=[],n=o.next;continue}if(S&&Kt(a,_,r,p),a.e.f&zt&&(ct(a.e),i&&((Z=a.a)==null||Z.unfix(),b.delete(a))),a!==n){if(d.has(a)){if(k.length<y.length){var E=y[0],f;o=E.prev;var x=k[0],A=k[k.length-1];for(f=0;f<k.length;f+=1)ut(k[f],E,e);for(f=0;f<y.length;f+=1)d.delete(y[f]);C(t,x.prev,A.next),C(t,o,x),C(t,A,E),n=E,o=A,r-=1,k=[],y=[]}else d.delete(a),ut(a,n,e),C(t,a.prev,a.next),C(t,a,o===null?t.first:o.next),C(t,o,a),o=a;continue}for(k=[],y=[];n!==null&&n.k!==c;)d.add(n),y.push(n),n=n.next;if(n===null)continue;a=n}k.push(a),o=a,n=a.next}const D=Array.from(d);for(;n!==null;)D.push(n),n=n.next;var H=D.length;if(H>0){var _t=p&kt&&h===0?e:null;if(i){for(r=0;r<H;r+=1)(W=D[r].a)==null||W.measure();for(r=0;r<H;r+=1)(j=D[r].a)==null||j.fix()}$t(t,D,_t,m)}i&&At(()=>{var tt;for(a of b)(tt=a.a)==null||tt.apply()}),nt.first=t.first&&t.first.e,nt.last=o&&o.e}function Kt(l,t,e,u){u&M&&st(l.v,t),u&Q?st(l.i,e):l.i=e}function pt(l,t,e,u,p,v,i,S,h){var m=G;try{var g=(h&M)!==0,n=(h&V)===0,d=g?n?Tt(p):lt(p):p,o=h&Q?lt(i):i,b={i:o,v:d,k:v,a:null,e:null,prev:e,next:u};return G=b,b.e=vt(()=>S(l,d,o),R),b.e.prev=e&&e.e,b.e.next=u&&u.e,e===null?t.first=b:(e.next=b,e.e.next=b.e),u!==null&&(u.prev=b,u.e.prev=b.e),b}finally{G=m}}function ut(l,t,e){for(var u=l.next?l.next.e.nodes.start:e,p=t?t.e.nodes.start:e,v=l.e.nodes.start;v!==u;){var i=v.nextSibling;p.before(v),v=i}}function C(l,t,e){t===null?l.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const Pt=function(){let l=Yt({test:!0});return l.get().test,l.subscribe(()=>{console.log("path changed")}),l.get()},it=Pt();var Vt=()=>{Ut()},Ft=()=>{J.get().spellcheck=!J.get().spellcheck},Jt=()=>{},Qt=Y('<p>/ <input type="text"></p>'),Xt=Y('<p>/ <button class="svelte-2z9p5h"> </button></p>'),Zt=Y('<div class="path svelte-2z9p5h"><p>📂</p> <input type="text"> <button class="open-subpath-button svelte-2z9p5h">Go</button> <button class="delete-subpath-button svelte-2z9p5h">❌</button></div>'),Wt=(l,t)=>qt(Bt+"/"+t()+"/"),jt=(l,t)=>delete F.get()[t()],te=Y('<div class="page svelte-2z9p5h"><p>📄</p> <input type="text"> <button class="goto-page-button svelte-2z9p5h">Go</button> <button class="close-page-button svelte-2z9p5h">❌</button></div>'),ee=Y('<header class="svelte-2z9p5h"><button class="logout-button svelte-2z9p5h">Logout</button> <button class="spellcheck-button svelte-2z9p5h"> </button> <button class="new-page-button svelte-2z9p5h">+📄</button> <button class="new-path-button svelte-2z9p5h">+📂</button> <button class="test-button svelte-2z9p5h">Test</button></header> <main><div class="current-path svelte-2z9p5h"><button class="back-button svelte-2z9p5h">Back</button> <!></div> <section id="items" class="svelte-2z9p5h"><!> <!></section></main>',1);function _e(l,t){Rt(t,!0);var e=ee(),u=rt(e),p=T(u);p.__click=[Vt];var v=s(s(p,!0));v.__click=[Ft];var i=T(v);q(()=>ot(i,`Spellcheck: ${J.get().spellcheck??""}`)),I(v);var S=s(s(v,!0));S.__click=()=>{const _=crypto.randomUUID().slice(0,8),c={title:"New Page",content:"",lastUpdated:Date.now()};F.get()[_]=c,z.path.pageIDs.push(_)};var h=s(s(S,!0));h.__click=[Jt];var m=s(s(h,!0));m.__click=()=>{it.test=!it.test},I(u);var g=s(s(u,!0)),n=T(g),d=T(n);d.__click=()=>{z.path.parent&&(z.path=z.path.parent)};var o=s(s(d,!0));P(o,65,()=>z.directory,K,(_,c,a)=>{var r=Et(),N=rt(r);Lt(N,()=>a===z.directory.length-1,E=>{var f=Qt(),x=s(T(f));B(x),I(f),$(x,()=>z.path.name,A=>z.path.name=A),O(E,f)},E=>{var f=Xt(),x=s(T(f));x.__click=()=>{z.path=w(c)};var A=T(x);I(x),I(f),q(()=>ot(A,w(c).name)),O(E,f)}),O(_,r)}),I(n);var b=s(s(n,!0)),k=T(b);P(k,65,()=>z.path.subpaths,K,(_,c,a)=>{var r=Zt(),N=T(r),E=s(s(N,!0));B(E);var f=s(s(E,!0));f.__click=()=>z.path=w(c);var x=s(s(f,!0));x.__click=()=>{z.path.subpaths.splice(z.path.subpaths.indexOf(w(c)),1)},I(r),$(E,()=>w(c).name,A=>w(c).name=A),O(_,r)});var y=s(s(k,!0));P(y,65,()=>Object.entries(F.get()),K,(_,c,a)=>{let r=()=>w(w(c))[0],N=()=>w(w(c))[1];var E=te(),f=T(E),x=s(s(f,!0));B(x);var A=s(s(x,!0));A.__click=[Wt,r];var D=s(s(A,!0));D.__click=[jt,r],I(E),$(x,()=>N().title,H=>N().title=H),O(_,E)}),I(b),I(g),q(()=>d.disabled=!z.path.parent),O(l,e),Ht()}Mt(["click"]);export{_e as component};
