import{a as x,t as P,c as me,d as ge}from"../chunks/disclose-version.DutoxqwM.js";import{E as he,aw as be,ax as ke,p as ye,o as we,L as Fe,ay as $e,q as xe,aq as B,az as Pe,K as Y,k as ce,u as qe,m as Z,O as _,R as u,P as w,T as M,l as c,M as ee,n as K,Q as Te,ah as Ce}from"../chunks/runtime.DPf4mIKn.js";import{a as Ee,s as z}from"../chunks/render.BxPt0eHo.js";import{p as oe,a as J}from"../chunks/if.BUEQ1AeY.js";import{e as L,i as N,F as Ie}from"../chunks/Folder.FICuKn8Z.js";import{s as W,r as Se}from"../chunks/attributes.CqG-anDB.js";import{t as V,B as se}from"../chunks/TextInput.Bx2iR895.js";import{d as te}from"../chunks/events.B9ZM7sXb.js";import{g as Ue}from"../chunks/entry.Ce1uxCCD.js";import{b as E}from"../chunks/paths.DG-qT7N-.js";import{g as le,t as Re,a as Me}from"../chunks/app.svelte.DpIlZ-Nj.js";import{g as Oe}from"../chunks/pages.svelte.CDocv9n6.js";import{g as de}from"../chunks/directories.svelte.hY9Zyg8V.js";import{I as H}from"../chunks/Icon.CLTmIN0p.js";import{c as Ae}from"../chunks/input.CEqqCcYk.js";import{p as De}from"../chunks/index-client.CwUjWDsD.js";const Le=requestAnimationFrame,Ne=()=>performance.now(),C={tick:r=>Le(r),now:()=>Ne(),tasks:new Set};function ve(r){C.tasks.forEach(e=>{e.c(r)||(C.tasks.delete(e),e.f())}),C.tasks.size!==0&&C.tick(ve)}function ze(r){let e;return C.tasks.size===0&&C.tick(ve),{promise:new Promise(a=>{C.tasks.add(e={c:r,f:a})}),abort(){C.tasks.delete(e)}}}function j(r,e){r.dispatchEvent(new CustomEvent(e))}function Be(r){const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function ne(r){const e={},a=r.split(";");for(const t of a){const[l,o]=t.split(":");if(!l||o===void 0)break;const n=Be(l.trim());e[n]=o.trim()}return e}const je=r=>r;function Ke(r,e,a,t){var l=(r&Pe)!==0,o="both",n,m=e.inert,f,s;function i(){return n??(n=a()(e,(t==null?void 0:t())??{},{direction:o}))}var F={is_global:l,in(){e.inert=m,j(e,"introstart"),f=X(e,i(),s,1,()=>{j(e,"introend"),f==null||f.abort(),f=n=void 0})},out(v){e.inert=!0,j(e,"outrostart"),s=X(e,i(),f,0,()=>{j(e,"outroend"),v==null||v()})},stop:()=>{f==null||f.abort(),s==null||s.abort()}},k=Fe;if((k.transitions??(k.transitions=[])).push(F),Ee){var $=l;if(!$){for(var d=k.parent;d&&d.f&he;)for(;(d=d.parent)&&!(d.f&be););$=!d||(d.f&ke)!==0}$&&ye(()=>{we(()=>F.in())})}}function X(r,e,a,t,l){var o=t===1;if($e(e)){var n,m=!1;return xe(()=>{if(!m){var h=e({direction:o?"in":"out"});n=X(r,h,a,t,l)}}),{abort:()=>{m=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return l(),{abort:B,deactivate:B,reset:B,t:()=>t};const{delay:f=0,css:s,tick:i,easing:F=je}=e;var k=[];if(o&&a===void 0&&(i&&i(0,1),s)){var $=ne(s(0,1));k.push($,$)}var d=()=>1-t,v=r.animate(k,{duration:f});return v.onfinish=()=>{var h=(a==null?void 0:a.t())??1-t;a==null||a.abort();var g=t-h,q=e.duration*Math.abs(g),O=[];if(q>0){if(s)for(var I=Math.ceil(q/16.666666666666668),A=0;A<=I;A+=1){var D=h+g*F(A/I),S=s(D,1-D);O.push(ne(S))}d=()=>{var U=v.currentTime;return h+g*F(U/q)},i&&ze(()=>{if(v.playState!=="running")return!1;var U=d();return i(U,1-U),!0})}v=r.animate(O,{duration:q,fill:"forwards"}),v.onfinish=()=>{d=()=>t,i==null||i(t,1-t),l()}},{abort:()=>{v&&(v.cancel(),v.effect=null)},deactivate:()=>{l=B},reset:()=>{t===0&&(i==null||i(1,0))},t:()=>d()}}function ie(r,e=navigator.language){const a=typeof r=="number"?r:r.getTime(),t=Math.round((a-Date.now())/1e3),l=[60,3600,86400,86400*7,86400*30,86400*365,1/0],o=["second","minute","hour","day","week","month","year"],n=l.findIndex(s=>s>Math.abs(t)),m=n?l[n-1]:1;return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(Math.floor(t/m),o[n])}var We=P('<button class="page svelte-gw73kh"><p class="title"> </p> <p class="last-updated svelte-gw73kh"> </p></button>');function Ge(r,e){Y(e,!0);const a=de();let t=ce(oe(ie(e.page.lastUpdated)));qe(()=>{a.currentFolder.pages&&a.currentFolder.pages.length>0&&Z(t,oe(ie(e.page.lastUpdated)))});var l=We();l.__click=function(...s){var i;(i=e.onclick)==null||i.apply(this,s)};var o=_(l),n=_(o);u(o);var m=w(o,2),f=_(m);u(m),u(l),M(()=>{z(n,e.page.title),z(f,c(t))}),x(r,l),ee()}te(["click"]);function Qe(r){const e=r-1;return e*e*e+1}function He(r,{delay:e=0,duration:a=400,easing:t=Qe,axis:l="y"}={}){const o=getComputedStyle(r),n=+o.opacity,m=l==="y"?"height":"width",f=parseFloat(o[m]),s=l==="y"?["top","bottom"]:["left","right"],i=s.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),F=parseFloat(o[`padding${i[0]}`]),k=parseFloat(o[`padding${i[1]}`]),$=parseFloat(o[`margin${i[0]}`]),d=parseFloat(o[`margin${i[1]}`]),v=parseFloat(o[`border${i[0]}Width`]),h=parseFloat(o[`border${i[1]}Width`]);return{delay:e,duration:a,easing:t,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*n};${m}: ${g*f}px;padding-${s[0]}: ${g*F}px;padding-${s[1]}: ${g*k}px;margin-${s[0]}: ${g*$}px;margin-${s[1]}: ${g*d}px;border-${s[0]}-width: ${g*v}px;border-${s[1]}-width: ${g*h}px;`}}var Je=(r,e)=>Z(e,!c(e)),Ve=(r,e)=>Z(e,!1),Xe=P('<label><input type="radio" class="svelte-1s16vnp"></label>'),Ye=P('<div class="color-picker svelte-1s16vnp"></div>'),Ze=P('<div class="color-picker-container svelte-1s16vnp"><button class="current-color svelte-1s16vnp"></button> <!></div>');function et(r,e){Y(e,!0);const a=[];let t=De(e,"color",15);const l=le();let o=K(()=>Re.find(F=>F.name===l.themeName)),n=K(()=>c(o)?[c(o).theme1,c(o).theme2,c(o).theme3,c(o).theme4,c(o).theme5]:[]),m=ce(!1);var f=Ze(),s=_(f);s.__click=[Je,m];var i=w(s,2);J(i,()=>c(m),F=>{var k=Ye();L(k,21,()=>c(n),N,($,d)=>{var v=Xe(),h=_(v);Se(h);var g;h.__click=[Ve,m],u(v),M(()=>{g!==(g=c(d))&&(h.value=(h.__value=c(d))==null?"":c(d)),W(h,"style",`background-color: ${c(d)??""}`),V(h,"selected",t()===c(d))}),Ae(a,[],h,()=>(c(d),t()),q=>t(q)),x($,v)}),u(k),Ke(3,k,()=>He,()=>({duration:200,axis:"x"})),x(F,k)}),u(f),M(()=>W(s,"style",`background-color: ${t()??""}`)),x(r,f),ee()}te(["click"]);var tt=P('<button class="back-button"><!></button>'),rt=P('<div class="item svelte-1qk0ws4"><!></div>'),at=P('<div class="full-width-item svelte-1qk0ws4"><!></div>'),ot=P('<p> <button class="close-page-button">‚ùå</button></p>'),st=P('<p> <button class="close-page-button">‚ùå</button></p>'),nt=P('<div class="page-container svelte-1qk0ws4"><header class="svelte-1qk0ws4"><!> <div class="title svelte-1qk0ws4"> </div> <!></header> <main class="svelte-1qk0ws4"><div class="grid svelte-1qk0ws4"><!> <div class="svelte-1qk0ws4"><button class="add-folder svelte-1qk0ws4"><!></button></div> <!> <div class="full-width-item svelte-1qk0ws4"><button class="add-page svelte-1qk0ws4"><!></button></div></div></main> <footer class="svelte-1qk0ws4"><a><!></a> <!> <section id="orphaned-folders"><p>Orphaned folders:</p> <!></section> <section id="orphaned-pages"><p>Orphaned pages:</p> <!></section></footer></div>');function Ft(r,e){Y(e,!0),le();const a=Oe();Me();const t=de();let l=K(()=>Object.keys(a).filter(p=>t.currentFolder.pages&&t.currentFolder.pages.includes(p)));function o(){const p=crypto.randomUUID().slice(0,8),b={title:"Untitled",content:"",lastUpdated:Date.now()};return a[p]=b,p}var n=nt(),m=_(n),f=_(m);J(f,()=>t.currentPath.length>1,p=>{var b=tt();b.__click=()=>{t.currentPath.length>1&&t.currentPath.pop()};var y=_(b);H(y,{url:`${E??""}/images/icons/back.svg`,color:"var(--bg)",size:"24px"}),u(b),x(p,b)});var s=w(f,2),i=_(s);u(s);var F=w(s,2);et(F,{get color(){return t.currentFolder.color},set color(p){t.currentFolder.color=p}}),u(m);var k=w(m,2),$=_(k),d=_($);J(d,()=>t.currentFolder.subfolders,p=>{var b=ge(),y=Ce(b);L(y,17,()=>t.currentFolder.subfolders,N,(T,R)=>{var Q=rt(),_e=_(Q);Ie(_e,{get folder(){return t.folders[c(R)]},onclick:()=>t.currentPath.push(c(R))}),u(Q),x(T,Q)}),x(p,b)});var v=w(d,2),h=_(v);h.__click=()=>t.addSubfolder();var g=_(h);H(g,{url:`${E??""}/images/icons/plus.svg`,color:"var(--bg)"}),u(h),u(v);var q=w(v,2);L(q,17,()=>c(l),N,(p,b)=>{var y=at(),T=_(y);Ge(T,{get page(){return a[c(b)]},onclick:()=>Ue(E+"/"+c(b)+"/")}),u(y),x(p,y)});var O=w(q,2),I=_(O);I.__click=()=>{const p=o();t.addPageID(p)};var A=_(I);H(A,{url:`${E??""}/images/icons/plus.svg`,color:"var(--bg-alt)"}),u(I),u(O),u($),u(k);var D=w(k,2),S=_(D);W(S,"href",`${E??""}/profile`);var U=_(S);se(U,{iconURL:`${E??""}/images/icons/gear.svg`}),u(S);var re=w(S,2),ue=K(()=>t.currentPath.length<=1);se(re,{variant:"error",iconURL:`${E??""}/images/icons/xmark-small.svg`,get disabled(){return c(ue)},onclick:()=>{if(t.currentPath.length>1){const p=t.currentPath.pop();p&&t.removeSubfolder(p)}},children:(p,b)=>{Te();var y=me("Delete Folder");x(p,y)},$$slots:{default:!0}});var G=w(re,2),fe=w(_(G),2);L(fe,17,()=>t.orphanedFolders,N,(p,b)=>{var y=ot(),T=_(y),R=w(T);R.__click=()=>{delete t.folders[c(b)]},u(y),M(()=>z(T,`üíÄüìÅ ${t.folders[c(b)].name??""}`)),x(p,y)}),u(G);var ae=w(G,2),pe=w(_(ae),2);L(pe,17,()=>t.orphanedPages,N,(p,b)=>{var y=st(),T=_(y),R=w(T);R.__click=()=>{delete a[c(b)]},u(y),M(()=>z(T,`üíÄüìÑ ${a[c(b)].title??""}`)),x(p,y)}),u(ae),u(D),u(n),M(()=>{W(n,"style",`background-color: ${t.currentFolder.color??""};`),z(i,t.currentFolder.name),V(v,"item",t.currentFolder.subfolders),V(v,"full-width-item",!t.currentFolder.subfolders)}),x(r,n),ee()}te(["click"]);export{Ft as component};
