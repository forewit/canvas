import{a as x,t as T}from"../chunks/disclose-version.BhGCNZWg.js";import{a1 as V,a as p,a3 as N,a4 as q,c as _,a6 as E,b as d,a5 as g,a7 as G}from"../chunks/runtime.DGpmsJ_j.js";import{s as A}from"../chunks/render.DhbLvMUA.js";import{e as j,i as w}from"../chunks/each.BVZPuxQC.js";import{s as b}from"../chunks/attributes.CsCSMkrp.js";import{d as B}from"../chunks/events.Rw6QuNmx.js";import{p as h}from"../chunks/proxy.CIU44urm.js";import{o as D}from"../chunks/index-client.DWHRIoA8.js";var F=(u,i,m)=>i(d(m)),J=(u,i,m)=>i(d(m)),K=(u,i,m)=>i(d(m)),P=(u,i,m)=>i(d(m)),Q=T('<div class="grid-item svelte-3rptgj"> <button class="top svelte-3rptgj"></button> <button class="bottom svelte-3rptgj"></button> <button class="left svelte-3rptgj"></button> <button class="right svelte-3rptgj"></button></div>'),U=T('<button class="row-zone svelte-3rptgj"></button>'),X=T('<button class="col-zone svelte-3rptgj"></button>'),Y=T('<div class="grid svelte-3rptgj"><!> <!> <!></div>');function Z(u,i){V(i,!0);let m=p(0),k=p(0),I=p(h([])),R=p(""),f=p(h([]));function y(){let t=i.gridTemplate.map(e=>e.map(n=>`a${n}`));const o=t[0].length;t.unshift(Array(o*2-1).fill("r0"));let r=1;for(let e=1;e<t.length-1;(e+=1)-1){let n=[],s=t[e],l=t[e+1];for(let c=0;c<s.length;(c+=1)-1)s[c]===l[c]?n.push(s[c]):c>0&&n[c-1].startsWith("r")?n[c]=n[c-1]:(n.push("r"+r),r+=1);t.splice(e+1,0,n),e+=1}t.push(Array(o).fill("r"+r)),t.forEach(e=>e.unshift("c0"));let a=1;for(let e=1;e<t.length;(e+=1)-1){let n=t[e],s=t[e-1];for(let l=1;l<n.length-1;(l+=1)-1)n[l]!==n[l+1]?s[l+1].startsWith("c")?n.splice(l+1,0,s[l+1]):(n.splice(l+1,0,"c"+a),a+=1):n.splice(l+1,0,n[l]),l+=1}t.forEach(e=>e.push("c"+a)),_(m,r+1),_(k,a+1),_(I,h(i.gridTemplate.flat().filter((e,n,s)=>s.indexOf(e)===n))),_(f,h(t)),_(R,h(t.map(e=>`"${e.join(" ")}"`).join(`
`)))}function C(){return i.gridTemplate.flat().reduce((t,o)=>Math.max(t,o),0)+1}function O(t){}function z(t){const o=i.gridTemplate.findIndex(n=>n.includes(t)),r=i.gridTemplate[o].indexOf(t),a=i.gridTemplate[o].lastIndexOf(t)+1-r,e=i.gridTemplate.findLastIndex(n=>n.includes(t))+1-o;console.log({x:r,y:o,width:a,height:e})}function W(t){console.log("insert row zone",t);const o=d(f).findIndex(l=>l.includes(`r${t}`)),a=(d(f)[o].indexOf(`r${t}`)-1)/2,e=o/2,n=(d(f)[o].lastIndexOf(`r${t}`)+1)/2-a;let s=Array(n).fill(C());if(e===0)i.gridTemplate.unshift(s);else{let l=i.gridTemplate[e-1];for(let c=0;c<l.length;(c+=1)-1)(c<a||c>=a+n)&&s.splice(c,0,l[c]);i.gridTemplate.splice(e,0,s)}y()}function H(t){const o=d(f).findIndex(l=>l.includes(`c${t}`)),r=d(f).findLastIndex(l=>l.includes(`c${t}`)),a=d(f)[o].indexOf(`c${t}`)/2,e=Math.max((o-1)/2,0),n=Math.min((r-o)/2+1,i.gridTemplate.length),s=C();for(let l=0;l<i.gridTemplate.length;(l+=1)-1)l<e||l>=e+n?i.gridTemplate[l].splice(a,0,i.gridTemplate[l][a]):i.gridTemplate[l].splice(a,0,s);y()}D(()=>{y()});var v=Y(),L=E(v);j(L,17,()=>d(I),w,(t,o)=>{var r=Q(),a=E(r),e=g(a);e.__click=[F,z,o];var n=g(e,2);n.__click=[J,z,o];var s=g(n,2);s.__click=[K,O,o];var l=g(s,2);l.__click=[P,O,o],G(r),N(()=>{b(r,"style",`grid-area: a${d(o)??""};`),A(a,`${d(o)??""} `)}),x(t,r)});var M=g(L,2);j(M,17,()=>Array(d(m)),w,(t,o,r)=>{var a=U();b(a,"style",`grid-area: r${r??""}`),a.__click=()=>W(r),a.textContent=`r${r??""}`,x(t,a)});var S=g(M,2);j(S,17,()=>Array(d(k)),w,(t,o,r)=>{var a=X();b(a,"style",`grid-area: c${r??""}`),a.__click=()=>H(r),a.textContent=`c${r??""}`,x(t,a)}),G(v),N(()=>b(v,"style",`grid-template-areas: ${d(R)??""}; 
            grid-template-columns: repeat(${i.gridTemplate[0].length??""}, min-content auto) min-content;
            grid-template-rows: repeat(${i.gridTemplate.length??""}, min-content auto) min-content;`)),x(u,v),q()}B(["click"]);function rt(u){Z(u,{gridTemplate:[[1]]})}export{rt as component};
